(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')module.exports=factory();else if(typeof define==='function'&&define.amd)define("angular-ui-router",[],factory);else if(typeof exports==='object')exports["angular-ui-router"]=factory();else root["angular-ui-router"]=factory()})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}__export(__webpack_require__(1));__export(__webpack_require__(54));__export(__webpack_require__(56));__webpack_require__(59);__webpack_require__(60);__webpack_require__(61);__webpack_require__(62);Object.defineProperty(exports,"__esModule",{value:true});exports.default="ui.router"},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}__export(__webpack_require__(2));__export(__webpack_require__(47));__export(__webpack_require__(48));__export(__webpack_require__(49));__export(__webpack_require__(50));__export(__webpack_require__(51));__export(__webpack_require__(52));__export(__webpack_require__(53));__export(__webpack_require__(45));var router_1=__webpack_require__(25);exports.UIRouter=router_1.UIRouter},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}__export(__webpack_require__(3));__export(__webpack_require__(6));__export(__webpack_require__(7));__export(__webpack_require__(5));__export(__webpack_require__(4));__export(__webpack_require__(8));__export(__webpack_require__(9));__export(__webpack_require__(12))},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var hof_1=__webpack_require__(5);var coreservices_1=__webpack_require__(6);var w=typeof window==='undefined'?{}:window;var angular=w.angular||{};exports.fromJson=angular.fromJson||JSON.parse.bind(JSON);exports.toJson=angular.toJson||JSON.stringify.bind(JSON);exports.copy=angular.copy||_copy;exports.forEach=angular.forEach||_forEach;exports.extend=angular.extend||_extend;exports.equals=angular.equals||_equals;exports.identity=function(x){return x};exports.noop=function(){return undefined};function bindFunctions(from,to,bindTo,fnNames){if(fnNames===void 0){fnNames=Object.keys(from)}return fnNames.filter(function(name){return typeof from[name]==='function'}).forEach(function(name){return to[name]=from[name].bind(bindTo)})}exports.bindFunctions=bindFunctions;exports.inherit=function(parent,extra){return exports.extend(new(exports.extend(function(){},{prototype:parent}))(),extra)};var restArgs=function(args,idx){if(idx===void 0){idx=0}return Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(args,idx))};exports.inArray=function(array,obj){return array.indexOf(obj)!==-1};exports.removeFrom=hof_1.curry(function(array,obj){var idx=array.indexOf(obj);if(idx>=0)array.splice(idx,1);return array});function defaults(opts){if(opts===void 0){opts={}}var defaultsList=[];for(var _i=1;_i<arguments.length;_i++){defaultsList[_i-1]=arguments[_i]}var defaults=merge.apply(null,[{}].concat(defaultsList));return exports.extend({},defaults,pick(opts||{},Object.keys(defaults)))}exports.defaults=defaults;function merge(dst){var objs=[];for(var _i=1;_i<arguments.length;_i++){objs[_i-1]=arguments[_i]}exports.forEach(objs,function(obj){exports.forEach(obj,function(value,key){if(!dst.hasOwnProperty(key))dst[key]=value})});return dst}exports.merge=merge;exports.mergeR=function(memo,item){return exports.extend(memo,item)};function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}exports.ancestors=ancestors;function equalForKeys(a,b,keys){if(keys===void 0){keys=Object.keys(a)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return false}return true}exports.equalForKeys=equalForKeys;function pickOmitImpl(predicate,obj){var keys=[];for(var _i=2;_i<arguments.length;_i++){keys[_i-2]=arguments[_i]}var objCopy={};for(var key in obj){if(predicate(keys,key))objCopy[key]=obj[key]}return objCopy}function pick(obj){return pickOmitImpl.apply(null,[exports.inArray].concat(restArgs(arguments)))}exports.pick=pick;function omit(obj){var notInArray=function(array,item){return!exports.inArray(array,item)};return pickOmitImpl.apply(null,[notInArray].concat(restArgs(arguments)))}exports.omit=omit;function pluck(collection,propName){return map(collection,hof_1.prop(propName))}exports.pluck=pluck;function filter(collection,callback){var arr=predicates_1.isArray(collection),result=arr?[]:{};var accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};exports.forEach(collection,function(item,i){if(callback(item,i))accept(item,i)});return result}exports.filter=filter;function find(collection,callback){var result;exports.forEach(collection,function(item,i){if(result)return;if(callback(item,i))result=item});return result}exports.find=find;exports.mapObj=map;function map(collection,callback){var result=predicates_1.isArray(collection)?[]:{};exports.forEach(collection,function(item,i){return result[i]=callback(item,i)});return result}exports.map=map;exports.values=function(obj){return Object.keys(obj).map(function(key){return obj[key]})};exports.allTrueR=function(memo,elem){return memo&&elem};exports.anyTrueR=function(memo,elem){return memo||elem};exports.unnestR=function(memo,elem){return memo.concat(elem)};exports.flattenR=function(memo,elem){return predicates_1.isArray(elem)?memo.concat(elem.reduce(exports.flattenR,[])):pushR(memo,elem)};function pushR(arr,obj){arr.push(obj);return arr}exports.pushR=pushR;exports.uniqR=function(acc,token){return exports.inArray(acc,token)?acc:pushR(acc,token)};exports.unnest=function(arr){return arr.reduce(exports.unnestR,[])};exports.flatten=function(arr){return arr.reduce(exports.flattenR,[])};function assertPredicate(predicate,errMsg){if(errMsg===void 0){errMsg="assert failure"}return function(obj){if(!predicate(obj)){throw new Error(predicates_1.isFunction(errMsg)?errMsg(obj):errMsg);}return true}}exports.assertPredicate=assertPredicate;exports.pairs=function(obj){return Object.keys(obj).map(function(key){return[key,obj[key]]})};function arrayTuples(){var arrayArgs=[];for(var _i=0;_i<arguments.length;_i++){arrayArgs[_i-0]=arguments[_i]}if(arrayArgs.length===0)return[];var length=arrayArgs.reduce(function(min,arr){return Math.min(arr.length,min)},9007199254740991);return Array.apply(null,Array(length)).map(function(ignored,idx){return arrayArgs.map(function(arr){return arr[idx]})})}exports.arrayTuples=arrayTuples;function applyPairs(memo,keyValTuple){var key,value;if(predicates_1.isArray(keyValTuple))key=keyValTuple[0],value=keyValTuple[1];if(!predicates_1.isString(key))throw new Error("invalid parameters to applyPairs");memo[key]=value;return memo}exports.applyPairs=applyPairs;function tail(arr){return arr.length&&arr[arr.length-1]||undefined}exports.tail=tail;function _copy(src,dest){if(dest)Object.keys(dest).forEach(function(key){return delete dest[key]});if(!dest)dest={};return exports.extend(dest,src)}function _forEach(obj,cb,_this){if(predicates_1.isArray(obj))return obj.forEach(cb,_this);Object.keys(obj).forEach(function(key){return cb(obj[key],key)})}function _copyProps(to,from){Object.keys(from).forEach(function(key){return to[key]=from[key]});return to}function _extend(toObj){return restArgs(arguments,1).filter(exports.identity).reduce(_copyProps,toObj)}function _equals(o1,o2){if(o1===o2)return true;if(o1===null||o2===null)return false;if(o1!==o1&&o2!==o2)return true;var t1=typeof o1,t2=typeof o2;if(t1!==t2||t1!=='object')return false;var tup=[o1,o2];if(hof_1.all(predicates_1.isArray)(tup))return _arraysEq(o1,o2);if(hof_1.all(predicates_1.isDate)(tup))return o1.getTime()===o2.getTime();if(hof_1.all(predicates_1.isRegExp)(tup))return o1.toString()===o2.toString();if(hof_1.all(predicates_1.isFunction)(tup))return true;var predicates=[predicates_1.isFunction,predicates_1.isArray,predicates_1.isDate,predicates_1.isRegExp];if(predicates.map(hof_1.any).reduce(function(b,fn){return b||!!fn(tup)},false))return false;var key,keys={};for(key in o1){if(!_equals(o1[key],o2[key]))return false;keys[key]=true}for(key in o2){if(!keys[key])return false}return true}function _arraysEq(a1,a2){if(a1.length!==a2.length)return false;return arrayTuples(a1,a2).reduce(function(b,t){return b&&_equals(t[0],t[1])},true)}exports.silenceUncaughtInPromise=function(promise){return promise.catch(function(e){return 0})&&promise};exports.silentRejection=function(error){return exports.silenceUncaughtInPromise(coreservices_1.services.$q.reject(error))}},function(module,exports,__webpack_require__){"use strict";var hof_1=__webpack_require__(5);var toStr=Object.prototype.toString;var tis=function(t){return function(x){return typeof(x)===t}};exports.isUndefined=tis('undefined');exports.isDefined=hof_1.not(exports.isUndefined);exports.isNull=function(o){return o===null};exports.isFunction=tis('function');exports.isNumber=tis('number');exports.isString=tis('string');exports.isObject=function(x){return x!==null&&typeof x==='object'};exports.isArray=Array.isArray;exports.isDate=(function(x){return toStr.call(x)==='[object Date]'});exports.isRegExp=(function(x){return toStr.call(x)==='[object RegExp]'});function isInjectable(val){if(exports.isArray(val)&&val.length){var head=val.slice(0,-1),tail=val.slice(-1);return!(head.filter(hof_1.not(exports.isString)).length||tail.filter(hof_1.not(exports.isFunction)).length)}return exports.isFunction(val)}exports.isInjectable=isInjectable;exports.isPromise=hof_1.and(exports.isObject,hof_1.pipe(hof_1.prop('then'),exports.isFunction))},function(module,exports){"use strict";function curry(fn){var initial_args=[].slice.apply(arguments,[1]);var func_args_length=fn.length;function curried(args){if(args.length>=func_args_length)return fn.apply(null,args);return function(){return curried(args.concat([].slice.apply(arguments)))}}return curried(initial_args)}exports.curry=curry;function compose(){var args=arguments;var start=args.length-1;return function(){var i=start,result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}}exports.compose=compose;function pipe(){var funcs=[];for(var _i=0;_i<arguments.length;_i++){funcs[_i-0]=arguments[_i]}return compose.apply(null,[].slice.call(arguments).reverse())}exports.pipe=pipe;exports.prop=function(name){return function(obj){return obj&&obj[name]}};exports.propEq=curry(function(name,val,obj){return obj&&obj[name]===val});exports.parse=function(name){return pipe.apply(null,name.split(".").map(exports.prop))};exports.not=function(fn){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i-0]=arguments[_i]}return!fn.apply(null,args)}};function and(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i-0]=arguments[_i]}return fn1.apply(null,args)&&fn2.apply(null,args)}}exports.and=and;function or(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i-0]=arguments[_i]}return fn1.apply(null,args)||fn2.apply(null,args)}}exports.or=or;exports.all=function(fn1){return function(arr){return arr.reduce(function(b,x){return b&&!!fn1(x)},true)}};exports.any=function(fn1){return function(arr){return arr.reduce(function(b,x){return b||!!fn1(x)},false)}};exports.is=function(ctor){return function(obj){return(obj!=null&&obj.constructor===ctor||obj instanceof ctor)}};exports.eq=function(val){return function(other){return val===other}};exports.val=function(v){return function(){return v}};function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}exports.invoke=invoke;function pattern(struct){return function(x){for(var i=0;i<struct.length;i++){if(struct[i][0](x))return struct[i][1](x)}}}exports.pattern=pattern},function(module,exports){"use strict";var notImplemented=function(fnname){return function(){throw new Error(fnname+"(): No coreservices implementation for UI-Router is loaded. You should include one of: ['angular1.js']");}};var services={$q:undefined,$injector:undefined,location:{},locationConfig:{},template:{}};exports.services=services;["setUrl","path","search","hash","onChange"].forEach(function(key){return services.location[key]=notImplemented(key)});["port","protocol","host","baseHref","html5Mode","hashPrefix"].forEach(function(key){return services.locationConfig[key]=notImplemented(key)})},function(module,exports){"use strict";var Glob=(function(){function Glob(text){this.text=text;this.glob=text.split('.');var regexpString=this.text.split('.').map(function(seg){if(seg==='**')return'(?:|(?:\\.[^.]*)*)';if(seg==='*')return'\\.[^.]*';return'\\.'+seg}).join('');this.regexp=new RegExp("^"+regexpString+"$")}Glob.prototype.matches=function(name){return this.regexp.test('.'+name)};Glob.is=function(text){return text.indexOf('*')>-1};Glob.fromString=function(text){if(!this.is(text))return null;return new Glob(text)};return Glob}());exports.Glob=Glob},function(module,exports){"use strict";var Queue=(function(){function Queue(_items,_limit){if(_items===void 0){_items=[]}if(_limit===void 0){_limit=null}this._items=_items;this._limit=_limit}Queue.prototype.enqueue=function(item){var items=this._items;items.push(item);if(this._limit&&items.length>this._limit)items.shift();return item};Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]};Queue.prototype.clear=function(){var current=this._items;this._items=[];return current};Queue.prototype.size=function(){return this._items.length};Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]};Queue.prototype.peekTail=function(){return this._items[this._items.length-1]};Queue.prototype.peekHead=function(){if(this.size())return this._items[0]};return Queue}());exports.Queue=Queue},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var rejectFactory_1=__webpack_require__(10);var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var transition_1=__webpack_require__(11);var resolvable_1=__webpack_require__(19);function maxLength(max,str){if(str.length<=max)return str;return str.substr(0,max-3)+"..."}exports.maxLength=maxLength;function padString(length,str){while(str.length<length)str+=" ";return str}exports.padString=padString;function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,function($1){return $1.toLowerCase()}).replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}exports.kebobString=kebobString;function _toJson(obj){return JSON.stringify(obj)}function _fromJson(json){return predicates_1.isString(json)?JSON.parse(json):json}function promiseToString(p){return"Promise("+JSON.stringify(p)+")"}function functionToString(fn){var fnStr=fnToString(fn);var namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/);return namedFunctionMatch?namedFunctionMatch[1]:fnStr}exports.functionToString=functionToString;function fnToString(fn){var _fn=predicates_1.isArray(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}exports.fnToString=fnToString;var stringifyPatternFn=null;var stringifyPattern=function(value){var isTransitionRejectionPromise=rejectFactory_1.Rejection.isTransitionRejectionPromise;stringifyPatternFn=stringifyPatternFn||hof_1.pattern([[hof_1.not(predicates_1.isDefined),hof_1.val("undefined")],[predicates_1.isNull,hof_1.val("null")],[predicates_1.isPromise,hof_1.val("[Promise]")],[isTransitionRejectionPromise,function(x){return x._transitionRejection.toString()}],[hof_1.is(rejectFactory_1.Rejection),hof_1.invoke("toString")],[hof_1.is(transition_1.Transition),hof_1.invoke("toString")],[hof_1.is(resolvable_1.Resolvable),hof_1.invoke("toString")],[predicates_1.isInjectable,functionToString],[hof_1.val(true),common_1.identity]]);return stringifyPatternFn(value)};function stringify(o){var seen=[];function format(val){if(predicates_1.isObject(val)){if(seen.indexOf(val)!==-1)return'[circular ref]';seen.push(val)}return stringifyPattern(val)}return JSON.stringify(o,function(key,val){return format(val)}).replace(/\\"/g,'"')}exports.stringify=stringify;exports.beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);if(idx===-1)return[str,""];return[str.substr(0,idx),str.substr(idx+1)]}}},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var strings_1=__webpack_require__(9);(function(RejectType){RejectType[RejectType["SUPERSEDED"]=2]="SUPERSEDED";RejectType[RejectType["ABORTED"]=3]="ABORTED";RejectType[RejectType["INVALID"]=4]="INVALID";RejectType[RejectType["IGNORED"]=5]="IGNORED";RejectType[RejectType["ERROR"]=6]="ERROR"})(exports.RejectType||(exports.RejectType={}));var RejectType=exports.RejectType;var Rejection=(function(){function Rejection(type,message,detail){this.type=type;this.message=message;this.detail=detail}Rejection.prototype.toString=function(){var detailString=function(d){return d&&d.toString!==Object.prototype.toString?d.toString():strings_1.stringify(d)};var type=this.type,message=this.message,detail=detailString(this.detail);return"TransitionRejection(type: "+type+", message: "+message+", detail: "+detail+")"};Rejection.prototype.toPromise=function(){return common_1.extend(common_1.silentRejection(this),{_transitionRejection:this})};Rejection.isTransitionRejectionPromise=function(obj){return obj&&(typeof obj.then==='function')&&obj._transitionRejection instanceof Rejection};Rejection.superseded=function(detail,options){var message="The transition has been superseded by a different transition";var rejection=new Rejection(RejectType.SUPERSEDED,message,detail);if(options&&options.redirected){rejection.redirected=true}return rejection};Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:true})};Rejection.invalid=function(detail){var message="This transition is invalid";return new Rejection(RejectType.INVALID,message,detail)};Rejection.ignored=function(detail){var message="The transition was ignored";return new Rejection(RejectType.IGNORED,message,detail)};Rejection.aborted=function(detail){var message="The transition has been aborted";return new Rejection(RejectType.ABORTED,message,detail)};Rejection.errored=function(detail){var message="The transition errored";return new Rejection(RejectType.ERROR,message,detail)};return Rejection}());exports.Rejection=Rejection},function(module,exports,__webpack_require__){"use strict";var strings_1=__webpack_require__(9);var trace_1=__webpack_require__(12);var coreservices_1=__webpack_require__(6);var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var hof_1=__webpack_require__(5);var transitionHook_1=__webpack_require__(13);var hookRegistry_1=__webpack_require__(15);var hookBuilder_1=__webpack_require__(16);var node_1=__webpack_require__(21);var pathFactory_1=__webpack_require__(20);var targetState_1=__webpack_require__(14);var param_1=__webpack_require__(22);var resolvable_1=__webpack_require__(19);var rejectFactory_1=__webpack_require__(10);var resolveContext_1=__webpack_require__(17);var router_1=__webpack_require__(25);var transitionCount=0;var stateSelf=hof_1.prop("self");var Transition=(function(){function Transition(fromPath,targetState,router){var _this=this;this._deferred=coreservices_1.services.$q.defer();this.promise=this._deferred.promise;this.treeChanges=function(){return _this._treeChanges};this.isActive=function(){return _this===_this._options.current()};this.router=router;this._targetState=targetState;if(!targetState.valid()){throw new Error(targetState.error());}hookRegistry_1.HookRegistry.mixin(new hookRegistry_1.HookRegistry(),this);this._options=common_1.extend({current:hof_1.val(this)},targetState.options());this.$id=transitionCount++;var toPath=pathFactory_1.PathFactory.buildToPath(fromPath,targetState);this._treeChanges=pathFactory_1.PathFactory.treeChanges(fromPath,toPath,this._options.reloadState);var enteringStates=this._treeChanges.entering.map(function(node){return node.state});pathFactory_1.PathFactory.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates);var rootResolvables=[new resolvable_1.Resolvable(router_1.UIRouter,function(){return router},[],undefined,router),new resolvable_1.Resolvable(Transition,function(){return _this},[],undefined,this),new resolvable_1.Resolvable('$transition$',function(){return _this},[],undefined,this),new resolvable_1.Resolvable('$stateParams',function(){return _this.params()},[],undefined,this.params())];var rootNode=this._treeChanges.to[0];var context=new resolveContext_1.ResolveContext(this._treeChanges.to);context.addResolvables(rootResolvables,rootNode.state)}Transition.prototype.onBefore=function(matchCriteria,callback,options){throw"";};Transition.prototype.onStart=function(matchCriteria,callback,options){throw"";};Transition.prototype.onExit=function(matchCriteria,callback,options){throw"";};Transition.prototype.onRetain=function(matchCriteria,callback,options){throw"";};Transition.prototype.onEnter=function(matchCriteria,callback,options){throw"";};Transition.prototype.onFinish=function(matchCriteria,callback,options){throw"";};Transition.prototype.onSuccess=function(matchCriteria,callback,options){throw"";};Transition.prototype.onError=function(matchCriteria,callback,options){throw"";};Transition.prototype.$from=function(){return common_1.tail(this._treeChanges.from).state};Transition.prototype.$to=function(){return common_1.tail(this._treeChanges.to).state};Transition.prototype.from=function(){return this.$from().self};Transition.prototype.to=function(){return this.$to().self};Transition.prototype.targetState=function(){return this._targetState};Transition.prototype.is=function(compare){if(compare instanceof Transition){return this.is({to:compare.$to().name,from:compare.$from().name})}return!((compare.to&&!hookRegistry_1.matchState(this.$to(),compare.to))||(compare.from&&!hookRegistry_1.matchState(this.$from(),compare.from)))};Transition.prototype.params=function(pathname){if(pathname===void 0){pathname="to"}return this._treeChanges[pathname].map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{})};Transition.prototype.injector=function(state){var path=this.treeChanges().to;if(state)path=pathFactory_1.PathFactory.subPath(path,function(node){return node.state===state||node.state.name===state});return new resolveContext_1.ResolveContext(path).injector()};Transition.prototype.getResolveTokens=function(){return new resolveContext_1.ResolveContext(this._treeChanges.to).getTokens()};Transition.prototype.getResolveValue=function(token){var resolveContext=new resolveContext_1.ResolveContext(this._treeChanges.to);var getData=function(token){var resolvable=resolveContext.getResolvable(token);if(resolvable===undefined){throw new Error("Dependency Injection token not found: "+strings_1.stringify(token));}return resolvable.data};if(predicates_1.isArray(token)){return token.map(getData)}return getData(token)};Transition.prototype.getResolvable=function(token){return new resolveContext_1.ResolveContext(this._treeChanges.to).getResolvable(token)};Transition.prototype.addResolvable=function(resolvable,state){if(state===void 0){state=""}var stateName=(typeof state==="string")?state:state.name;var topath=this._treeChanges.to;var targetNode=common_1.find(topath,function(node){return node.state.name===stateName});var resolveContext=new resolveContext_1.ResolveContext(topath);resolveContext.addResolvables([resolvable],targetNode.state)};Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null};Transition.prototype.options=function(){return this._options};Transition.prototype.entering=function(){return common_1.map(this._treeChanges.entering,hof_1.prop('state')).map(stateSelf)};Transition.prototype.exiting=function(){return common_1.map(this._treeChanges.exiting,hof_1.prop('state')).map(stateSelf).reverse()};Transition.prototype.retained=function(){return common_1.map(this._treeChanges.retained,hof_1.prop('state')).map(stateSelf)};Transition.prototype.views=function(pathname,state){if(pathname===void 0){pathname="entering"}var path=this._treeChanges[pathname];path=!state?path:path.filter(hof_1.propEq('state',state));return path.map(hof_1.prop("views")).filter(common_1.identity).reduce(common_1.unnestR,[])};Transition.prototype.redirect=function(targetState){var newOptions=common_1.extend({},this.options(),targetState.options(),{redirectedFrom:this,source:"redirect"});targetState=new targetState_1.TargetState(targetState.identifier(),targetState.$state(),targetState.params(),newOptions);var newTransition=this.router.transitionService.create(this._treeChanges.from,targetState);var originalEnteringNodes=this.treeChanges().entering;var redirectEnteringNodes=newTransition.treeChanges().entering;var nodeIsReloading=function(reloadState){return function(node){return reloadState&&node.state.includes[reloadState.name]}};var matchingEnteringNodes=node_1.PathNode.matching(redirectEnteringNodes,originalEnteringNodes).filter(hof_1.not(nodeIsReloading(targetState.options().reloadState)));matchingEnteringNodes.forEach(function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables});return newTransition};Transition.prototype._changedParams=function(){var _a=this._treeChanges,to=_a.to,from=_a.from;if(this._options.reload||common_1.tail(to).state!==common_1.tail(from).state)return undefined;var nodeSchemas=to.map(function(node){return node.paramSchema});var _b=[to,from].map(function(path){return path.map(function(x){return x.paramValues})}),toValues=_b[0],fromValues=_b[1];var tuples=common_1.arrayTuples(nodeSchemas,toValues,fromValues);return tuples.map(function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return param_1.Param.changed(schema,toVals,fromVals)}).reduce(common_1.unnestR,[])};Transition.prototype.dynamic=function(){var changes=this._changedParams();return!changes?false:changes.map(function(x){return x.dynamic}).reduce(common_1.anyTrueR,false)};Transition.prototype.ignored=function(){var changes=this._changedParams();return!changes?false:changes.length===0};Transition.prototype.hookBuilder=function(){return new hookBuilder_1.HookBuilder(this.router.transitionService,this,{transition:this,current:this._options.current})};Transition.prototype.run=function(){var _this=this;var runSynchronousHooks=transitionHook_1.TransitionHook.runSynchronousHooks;var hookBuilder=this.hookBuilder();var globals=this.router.globals;globals.transitionHistory.enqueue(this);var syncResult=runSynchronousHooks(hookBuilder.getOnBeforeHooks());if(rejectFactory_1.Rejection.isTransitionRejectionPromise(syncResult)){syncResult.catch(function(){return 0});var rejectReason=syncResult._transitionRejection;this._deferred.reject(rejectReason);return this.promise}if(!this.valid()){var error=new Error(this.error());this._deferred.reject(error);return this.promise}if(this.ignored()){trace_1.trace.traceTransitionIgnored(this);this._deferred.reject(rejectFactory_1.Rejection.ignored());return this.promise}var transitionSuccess=function(){trace_1.trace.traceSuccess(_this.$to(),_this);_this.success=true;_this._deferred.resolve(_this.to());runSynchronousHooks(hookBuilder.getOnSuccessHooks(),true)};var transitionError=function(reason){trace_1.trace.traceError(reason,_this);_this.success=false;_this._deferred.reject(reason);_this._error=reason;runSynchronousHooks(hookBuilder.getOnErrorHooks(),true)};trace_1.trace.traceTransitionStart(this);var appendHookToChain=function(prev,nextHook){return prev.then(function(){return nextHook.invokeHook()})};hookBuilder.asyncHooks().reduce(appendHookToChain,syncResult).then(transitionSuccess,transitionError);return this.promise};Transition.prototype.valid=function(){return!this.error()||this.success!==undefined};Transition.prototype.error=function(){var state=this.$to();var redirects=0,trans=this;while((trans=trans.redirectedFrom())!=null){if(++redirects>20)return"Too many Transition redirects (20+)"}if(state.self.abstract)return"Cannot transition to abstract state '"+state.name+"'";if(!param_1.Param.validates(state.parameters(),this.params()))return"Param values not valid for state '"+state.name+"'";if(this.success===false)return this._error};Transition.prototype.toString=function(){var fromStateOrName=this.from();var toStateOrName=this.to();var avoidEmptyHash=function(params){return(params["#"]!==null&&params["#"]!==undefined)?params:common_1.omit(params,"#")};var id=this.$id,from=predicates_1.isObject(fromStateOrName)?fromStateOrName.name:fromStateOrName,fromParams=common_1.toJson(avoidEmptyHash(this._treeChanges.from.map(hof_1.prop('paramValues')).reduce(common_1.mergeR,{}))),toValid=this.valid()?"":"(X) ",to=predicates_1.isObject(toStateOrName)?toStateOrName.name:toStateOrName,toParams=common_1.toJson(avoidEmptyHash(this.params()));return"Transition#"+id+"( '"+from+"'"+fromParams+" -> "+toValid+"'"+to+"'"+toParams+" )"};Transition.diToken=Transition;return Transition}());exports.Transition=Transition},function(module,exports,__webpack_require__){"use strict";var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(4);var strings_1=__webpack_require__(9);function uiViewString(viewData){if(!viewData)return'ui-view (defunct)';return("[ui-view#"+viewData.id+" tag ")+("in template from '"+(viewData.creationContext&&viewData.creationContext.name||'(root)')+"' state]: ")+("fqn: '"+viewData.fqn+"', ")+("name: '"+viewData.name+"@"+viewData.creationContext+"')")}var viewConfigString=function(viewConfig){return("[ViewConfig#"+viewConfig.$id+" from '"+(viewConfig.viewDecl.$context.name||'(root)')+"' state]: target ui-view: '"+viewConfig.viewDecl.$uiViewName+"@"+viewConfig.viewDecl.$uiViewContextAnchor+"'")};function normalizedCat(input){return predicates_1.isNumber(input)?Category[input]:Category[Category[input]]}(function(Category){Category[Category["RESOLVE"]=0]="RESOLVE";Category[Category["TRANSITION"]=1]="TRANSITION";Category[Category["HOOK"]=2]="HOOK";Category[Category["UIVIEW"]=3]="UIVIEW";Category[Category["VIEWCONFIG"]=4]="VIEWCONFIG"})(exports.Category||(exports.Category={}));var Category=exports.Category;var Trace=(function(){function Trace(){this._enabled={};this.approximateDigests=0}Trace.prototype._set=function(enabled,categories){var _this=this;if(!categories.length){categories=Object.keys(Category).map(function(k){return parseInt(k,10)}).filter(function(k){return!isNaN(k)}).map(function(key){return Category[key]})}categories.map(normalizedCat).forEach(function(category){return _this._enabled[category]=enabled})};Trace.prototype.enable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i-0]=arguments[_i]}this._set(true,categories)};Trace.prototype.disable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i-0]=arguments[_i]}this._set(false,categories)};Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]};Trace.prototype.traceTransitionStart=function(transition){if(!this.enabled(Category.TRANSITION))return;var tid=transition.$id,digest=this.approximateDigests,transitionStr=strings_1.stringify(transition);console.log("Transition #"+tid+" Digest #"+digest+": Started  -> "+transitionStr)};Trace.prototype.traceTransitionIgnored=function(trans){if(!this.enabled(Category.TRANSITION))return;var tid=trans&&trans.$id,digest=this.approximateDigests,transitionStr=strings_1.stringify(trans);console.log("Transition #"+tid+" Digest #"+digest+": Ignored  <> "+transitionStr)};Trace.prototype.traceHookInvocation=function(step,options){if(!this.enabled(Category.HOOK))return;var tid=hof_1.parse("transition.$id")(options),digest=this.approximateDigests,event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.functionToString(step.hookFn);console.log("Transition #"+tid+" Digest #"+digest+":   Hook -> "+event+" context: "+context+", "+strings_1.maxLength(200,name))};Trace.prototype.traceHookResult=function(hookResult,transitionResult,transitionOptions){if(!this.enabled(Category.HOOK))return;var tid=hof_1.parse("transition.$id")(transitionOptions),digest=this.approximateDigests,hookResultStr=strings_1.stringify(hookResult),transitionResultStr=strings_1.stringify(transitionResult);console.log("Transition #"+tid+" Digest #"+digest+":   <- Hook returned: "+strings_1.maxLength(200,hookResultStr)+", transition result: "+strings_1.maxLength(200,transitionResultStr))};Trace.prototype.traceResolvePath=function(path,when,trans){if(!this.enabled(Category.RESOLVE))return;var tid=trans&&trans.$id,digest=this.approximateDigests,pathStr=path&&path.toString();console.log("Transition #"+tid+" Digest #"+digest+":         Resolving "+pathStr+" ("+when+")")};Trace.prototype.traceResolvableResolved=function(resolvable,trans){if(!this.enabled(Category.RESOLVE))return;var tid=trans&&trans.$id,digest=this.approximateDigests,resolvableStr=resolvable&&resolvable.toString(),result=strings_1.stringify(resolvable.data);console.log("Transition #"+tid+" Digest #"+digest+":               <- Resolved  "+resolvableStr+" to: "+strings_1.maxLength(200,result))};Trace.prototype.traceError=function(reason,trans){if(!this.enabled(Category.TRANSITION))return;var tid=trans&&trans.$id,digest=this.approximateDigests,transitionStr=strings_1.stringify(trans);console.log("Transition #"+tid+" Digest #"+digest+": <- Rejected "+transitionStr+", reason: "+reason)};Trace.prototype.traceSuccess=function(finalState,trans){if(!this.enabled(Category.TRANSITION))return;var tid=trans&&trans.$id,digest=this.approximateDigests,state=finalState.name,transitionStr=strings_1.stringify(trans);console.log("Transition #"+tid+" Digest #"+digest+": <- Success  "+transitionStr+", final state: "+state)};Trace.prototype.traceUIViewEvent=function(event,viewData,extra){if(extra===void 0){extra=""}if(!this.enabled(Category.UIVIEW))return;console.log("ui-view: "+strings_1.padString(30,event)+" "+uiViewString(viewData)+extra)};Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")};Trace.prototype.traceUIViewFill=function(viewData,html){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Fill",viewData," with: "+strings_1.maxLength(200,html))};Trace.prototype.traceViewServiceEvent=function(event,viewConfig){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+viewConfigString(viewConfig))};Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))};return Trace}());exports.Trace=Trace;var trace=new Trace();exports.trace=trace},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var strings_1=__webpack_require__(9);var predicates_1=__webpack_require__(4);var hof_1=__webpack_require__(5);var trace_1=__webpack_require__(12);var coreservices_1=__webpack_require__(6);var rejectFactory_1=__webpack_require__(10);var targetState_1=__webpack_require__(14);var defaultOptions={async:true,rejectIfSuperseded:true,current:common_1.noop,transition:null,traceData:{},bind:null};var TransitionHook=(function(){function TransitionHook(transition,stateContext,eventHook,options){var _this=this;this.transition=transition;this.stateContext=stateContext;this.eventHook=eventHook;this.options=options;this.isSuperseded=function(){return _this.options.current()!==_this.options.transition};this.options=common_1.defaults(options,defaultOptions)}TransitionHook.prototype.invokeHook=function(){var _a=this,options=_a.options,eventHook=_a.eventHook;trace_1.trace.traceHookInvocation(this,options);if(options.rejectIfSuperseded&&this.isSuperseded()){return rejectFactory_1.Rejection.superseded(options.current()).toPromise()}var hookResult=!eventHook._deregistered?eventHook.callback.call(options.bind,this.transition,this.stateContext):undefined;return this.handleHookResult(hookResult)};TransitionHook.prototype.handleHookResult=function(hookResult){var _this=this;if(!predicates_1.isDefined(hookResult))return undefined;var mapHookResult=hof_1.pattern([[this.isSuperseded,function(){return rejectFactory_1.Rejection.superseded(_this.options.current()).toPromise()}],[hof_1.eq(false),function(){return rejectFactory_1.Rejection.aborted("Hook aborted transition").toPromise()}],[hof_1.is(targetState_1.TargetState),function(target){return rejectFactory_1.Rejection.redirected(target).toPromise()}],[predicates_1.isPromise,function(promise){return promise.then(_this.handleHookResult.bind(_this))}]]);var transitionResult=mapHookResult(hookResult);if(transitionResult)trace_1.trace.traceHookResult(hookResult,transitionResult,this.options);return transitionResult};TransitionHook.prototype.toString=function(){var _a=this,options=_a.options,eventHook=_a.eventHook;var event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.fnToString(eventHook.callback);return event+" context: "+context+", "+strings_1.maxLength(200,name)};TransitionHook.runSynchronousHooks=function(hooks,swallowExceptions){if(swallowExceptions===void 0){swallowExceptions=false}var results=[];for(var i=0;i<hooks.length;i++){var hook=hooks[i];try{results.push(hook.invokeHook())}catch(exception){if(!swallowExceptions){return rejectFactory_1.Rejection.errored(exception).toPromise()}var errorHandler=hook.transition.router.stateService.defaultErrorHandler();errorHandler(exception)}}var rejections=results.filter(rejectFactory_1.Rejection.isTransitionRejectionPromise);if(rejections.length)return rejections[0];return results.filter(predicates_1.isPromise).reduce(function(chain,promise){return chain.then(hof_1.val(promise))},coreservices_1.services.$q.when())};return TransitionHook}());exports.TransitionHook=TransitionHook},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var TargetState=(function(){function TargetState(_identifier,_definition,_params,_options){if(_params===void 0){_params={}}if(_options===void 0){_options={}}this._identifier=_identifier;this._definition=_definition;this._options=_options;this._params=_params||{}}TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier};TargetState.prototype.identifier=function(){return this._identifier};TargetState.prototype.params=function(){return this._params};TargetState.prototype.$state=function(){return this._definition};TargetState.prototype.state=function(){return this._definition&&this._definition.self};TargetState.prototype.options=function(){return this._options};TargetState.prototype.exists=function(){return!!(this._definition&&this._definition.self)};TargetState.prototype.valid=function(){return!this.error()};TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&!!base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}if(!this._definition)return"No such state '"+this.name()+"'";if(!this._definition.self)return"State '"+this.name()+"' has an invalid definition"};TargetState.prototype.toString=function(){return"'"+this.name()+"'"+common_1.toJson(this.params())};return TargetState}());exports.TargetState=TargetState},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var glob_1=__webpack_require__(7);function matchState(state,criterion){var toMatch=predicates_1.isString(criterion)?[criterion]:criterion;function matchGlobs(_state){var globStrings=toMatch;for(var i=0;i<globStrings.length;i++){var glob=glob_1.Glob.fromString(globStrings[i]);if((glob&&glob.matches(_state.name))||(!glob&&globStrings[i]===_state.name)){return true}}return false}var matchFn=(predicates_1.isFunction(toMatch)?toMatch:matchGlobs);return!!matchFn(state)}exports.matchState=matchState;var EventHook=(function(){function EventHook(matchCriteria,callback,options){if(options===void 0){options={}}this.callback=callback;this.matchCriteria=common_1.extend({to:true,from:true,exiting:true,retained:true,entering:true},matchCriteria);this.priority=options.priority||0;this.bind=options.bind||null;this._deregistered=false}EventHook._matchingNodes=function(nodes,criterion){if(criterion===true)return nodes;var matching=nodes.filter(function(node){return matchState(node.state,criterion)});return matching.length?matching:null};EventHook.prototype.matches=function(treeChanges){var mc=this.matchCriteria,_matchingNodes=EventHook._matchingNodes;var matches={to:_matchingNodes([common_1.tail(treeChanges.to)],mc.to),from:_matchingNodes([common_1.tail(treeChanges.from)],mc.from),exiting:_matchingNodes(treeChanges.exiting,mc.exiting),retained:_matchingNodes(treeChanges.retained,mc.retained),entering:_matchingNodes(treeChanges.entering,mc.entering),};var allMatched=["to","from","exiting","retained","entering"].map(function(prop){return matches[prop]}).reduce(common_1.allTrueR,true);return allMatched?matches:null};return EventHook}());exports.EventHook=EventHook;function makeHookRegistrationFn(hooks,name){return function(matchObject,callback,options){if(options===void 0){options={}}var eventHook=new EventHook(matchObject,callback,options);hooks[name].push(eventHook);return function deregisterEventHook(){eventHook._deregistered=true;common_1.removeFrom(hooks[name])(eventHook)}}}var HookRegistry=(function(){function HookRegistry(){var _this=this;this._transitionEvents={onBefore:[],onStart:[],onEnter:[],onRetain:[],onExit:[],onFinish:[],onSuccess:[],onError:[]};this.getHooks=function(name){return _this._transitionEvents[name]};this.onBefore=makeHookRegistrationFn(this._transitionEvents,"onBefore");this.onStart=makeHookRegistrationFn(this._transitionEvents,"onStart");this.onEnter=makeHookRegistrationFn(this._transitionEvents,"onEnter");this.onRetain=makeHookRegistrationFn(this._transitionEvents,"onRetain");this.onExit=makeHookRegistrationFn(this._transitionEvents,"onExit");this.onFinish=makeHookRegistrationFn(this._transitionEvents,"onFinish");this.onSuccess=makeHookRegistrationFn(this._transitionEvents,"onSuccess");this.onError=makeHookRegistrationFn(this._transitionEvents,"onError")}HookRegistry.mixin=function(source,target){Object.keys(source._transitionEvents).concat(["getHooks"]).forEach(function(key){return target[key]=source[key]})};return HookRegistry}());exports.HookRegistry=HookRegistry},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var transitionHook_1=__webpack_require__(13);var resolveContext_1=__webpack_require__(17);var HookBuilder=(function(){function HookBuilder($transitions,transition,baseHookOptions){var _this=this;this.$transitions=$transitions;this.transition=transition;this.baseHookOptions=baseHookOptions;this.getOnBeforeHooks=function(){return _this._buildNodeHooks("onBefore","to",tupleSort(),{async:false})};this.getOnStartHooks=function(){return _this._buildNodeHooks("onStart","to",tupleSort())};this.getOnExitHooks=function(){return _this._buildNodeHooks("onExit","exiting",tupleSort(true),{stateHook:true})};this.getOnRetainHooks=function(){return _this._buildNodeHooks("onRetain","retained",tupleSort(false),{stateHook:true})};this.getOnEnterHooks=function(){return _this._buildNodeHooks("onEnter","entering",tupleSort(false),{stateHook:true})};this.getOnFinishHooks=function(){return _this._buildNodeHooks("onFinish","to",tupleSort())};this.getOnSuccessHooks=function(){return _this._buildNodeHooks("onSuccess","to",tupleSort(),{async:false,rejectIfSuperseded:false})};this.getOnErrorHooks=function(){return _this._buildNodeHooks("onError","to",tupleSort(),{async:false,rejectIfSuperseded:false})};this.treeChanges=transition.treeChanges();this.toState=common_1.tail(this.treeChanges.to).state;this.fromState=common_1.tail(this.treeChanges.from).state;this.transitionOptions=transition.options()}HookBuilder.prototype.asyncHooks=function(){var onStartHooks=this.getOnStartHooks();var onExitHooks=this.getOnExitHooks();var onRetainHooks=this.getOnRetainHooks();var onEnterHooks=this.getOnEnterHooks();var onFinishHooks=this.getOnFinishHooks();var asyncHooks=[onStartHooks,onExitHooks,onRetainHooks,onEnterHooks,onFinishHooks];return asyncHooks.reduce(common_1.unnestR,[]).filter(common_1.identity)};HookBuilder.prototype._buildNodeHooks=function(hookType,matchingNodesProp,sortHooksFn,options){var _this=this;var matchingHooks=this._matchingHooks(hookType,this.treeChanges);if(!matchingHooks)return[];var makeTransitionHooks=function(hook){var matches=hook.matches(_this.treeChanges);var matchingNodes=matches[matchingNodesProp];var resolvePath=matchingNodesProp==='exiting'?_this.treeChanges.from:_this.treeChanges.to;var resolveContext=new resolveContext_1.ResolveContext(resolvePath);return matchingNodes.map(function(node){var _options=common_1.extend({bind:hook.bind,traceData:{hookType:hookType,context:node}},_this.baseHookOptions,options);var state=_options.stateHook?node.state:null;var transitionHook=new transitionHook_1.TransitionHook(_this.transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}})};return matchingHooks.map(makeTransitionHooks).reduce(common_1.unnestR,[]).sort(sortHooksFn).map(function(tuple){return tuple.transitionHook})};HookBuilder.prototype._matchingHooks=function(hookName,treeChanges){return[this.transition,this.$transitions].map(function(reg){return reg.getHooks(hookName)}).filter(common_1.assertPredicate(predicates_1.isArray,"broken event named: "+hookName)).reduce(common_1.unnestR,[]).filter(function(hook){return hook.matches(treeChanges)})};return HookBuilder}());exports.HookBuilder=HookBuilder;function tupleSort(reverseDepthSort){if(reverseDepthSort===void 0){reverseDepthSort=false}return function nodeDepthThenPriority(l,r){var factor=reverseDepthSort?-1:1;var depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return depthDelta!==0?depthDelta:r.hook.priority-l.hook.priority}}},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var trace_1=__webpack_require__(12);var coreservices_1=__webpack_require__(6);var interface_1=__webpack_require__(18);var resolvable_1=__webpack_require__(19);var pathFactory_1=__webpack_require__(20);var strings_1=__webpack_require__(9);var when=interface_1.resolvePolicies.when;var ALL_WHENS=[when.EAGER,when.LAZY];var EAGER_WHENS=[when.EAGER];var ResolveContext=(function(){function ResolveContext(_path){this._path=_path}ResolveContext.prototype.getTokens=function(){return this._path.reduce(function(acc,node){return acc.concat(node.resolvables.map(function(r){return r.token}))},[]).reduce(common_1.uniqR,[])};ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map(function(node){return node.resolvables}).reduce(common_1.unnestR,[]).filter(function(r){return r.token===token});return common_1.tail(matching)};ResolveContext.prototype.subContext=function(state){return new ResolveContext(pathFactory_1.PathFactory.subPath(this._path,function(node){return node.state===state}))};ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=common_1.find(this._path,hof_1.propEq('state',state));var keys=newResolvables.map(function(r){return r.token});node.resolvables=node.resolvables.filter(function(r){return keys.indexOf(r.token)===-1}).concat(newResolvables)};ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;if(when===void 0){when="LAZY"}var whenOption=common_1.inArray(ALL_WHENS,when)?when:"LAZY";var matchedWhens=whenOption===interface_1.resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace_1.trace.traceResolvePath(this._path,when,trans);var promises=this._path.reduce(function(acc,node){var matchesRequestedPolicy=function(resolvable){return common_1.inArray(matchedWhens,resolvable.getPolicy(node.state).when)};var nodeResolvables=node.resolvables.filter(matchesRequestedPolicy);var subContext=_this.subContext(node.state);var getResult=function(r){return r.get(subContext,trans).then(function(value){return({token:r.token,value:value})})};return acc.concat(nodeResolvables.map(getResult))},[]);return coreservices_1.services.$q.all(promises)};ResolveContext.prototype.injector=function(){return new UIInjectorImpl(this)};ResolveContext.prototype.findNode=function(resolvable){return common_1.find(this._path,function(node){return common_1.inArray(node.resolvables,resolvable)})};ResolveContext.prototype.getDependencies=function(resolvable){var node=this.findNode(resolvable);var subPath=pathFactory_1.PathFactory.subPath(this._path,function(x){return x===node})||this._path;var availableResolvables=subPath.reduce(function(acc,node){return acc.concat(node.resolvables)},[]).filter(function(res){return res!==resolvable});var getDependency=function(token){var matching=availableResolvables.filter(function(r){return r.token===token});if(matching.length)return common_1.tail(matching);var fromInjector=coreservices_1.services.$injector.get(token);if(!fromInjector){throw new Error("Could not find Dependency Injection token: "+strings_1.stringify(token));}return new resolvable_1.Resolvable(token,function(){return fromInjector},[],fromInjector)};return resolvable.deps.map(getDependency)};return ResolveContext}());exports.ResolveContext=ResolveContext;var UIInjectorImpl=(function(){function UIInjectorImpl(context){this.context=context;this.native=coreservices_1.services.$injector}UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if(!resolvable.resolved){throw new Error("Resolvable async .get() not complete:"+strings_1.stringify(resolvable.token));}return resolvable.data}return coreservices_1.services.$injector.get(token)};UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);if(resolvable)return resolvable.get(this.context);return coreservices_1.services.$q.when(coreservices_1.services.$injector.get(token))};return UIInjectorImpl}())},function(module,exports){"use strict";exports.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var coreservices_1=__webpack_require__(6);var trace_1=__webpack_require__(12);var strings_1=__webpack_require__(9);var predicates_1=__webpack_require__(4);exports.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var Resolvable=(function(){function Resolvable(arg1,resolveFn,deps,policy,data){this.resolved=false;this.promise=undefined;if(arg1 instanceof Resolvable){common_1.extend(this,arg1)}else if(predicates_1.isFunction(resolveFn)){if(arg1==null||arg1==undefined)throw new Error("new Resolvable(): token argument is required");if(!predicates_1.isFunction(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1;this.policy=policy;this.resolveFn=resolveFn;this.deps=deps||[];this.data=data;this.resolved=data!==undefined;this.promise=this.resolved?coreservices_1.services.$q.when(this.data):undefined}else if(predicates_1.isObject(arg1)&&arg1.token&&predicates_1.isFunction(arg1.resolveFn)){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{};var statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||exports.defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||exports.defaultResolvePolicy.async,}};Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this;var $q=coreservices_1.services.$q;var getResolvableDependencies=function(){return $q.all(resolveContext.getDependencies(_this).map(function(r){return r.get(resolveContext,trans)}))};var invokeResolveFn=function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)};var waitForRx=function(observable$){var cached=observable$.cache(1);return cached.take(1).toPromise().then(function(){return cached})};var node=resolveContext.findNode(this);var state=node&&node.state;var maybeWaitForRx=this.getPolicy(state).async==="RXWAIT"?waitForRx:common_1.identity;var applyResolvedValue=function(resolvedValue){_this.data=resolvedValue;_this.resolved=true;trace_1.trace.traceResolvableResolved(_this,trans);return _this.data};return this.promise=$q.when().then(getResolvableDependencies).then(invokeResolveFn).then(maybeWaitForRx).then(applyResolvedValue)};Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)};Resolvable.prototype.toString=function(){return"Resolvable(token: "+strings_1.stringify(this.token)+", requires: ["+this.deps.map(strings_1.stringify)+"])"};Resolvable.prototype.clone=function(){return new Resolvable(this)};Resolvable.fromData=function(token,data){return new Resolvable(token,function(){return data},null,null,data)};return Resolvable}());exports.Resolvable=Resolvable},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var targetState_1=__webpack_require__(14);var node_1=__webpack_require__(21);var PathFactory=(function(){function PathFactory(){}PathFactory.makeTargetState=function(path){var state=common_1.tail(path).state;return new targetState_1.TargetState(state,state,path.map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))};PathFactory.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map(function(state){return new node_1.PathNode(state).applyRawParams(toParams)})};PathFactory.buildToPath=function(fromPath,targetState){var toPath=PathFactory.buildPath(targetState);if(targetState.options().inherit){return PathFactory.inheritParams(fromPath,toPath,Object.keys(targetState.params()))}return toPath};PathFactory.applyViewConfigs=function($view,path,states){path.filter(function(node){return common_1.inArray(states,node.state)}).forEach(function(node){var viewDecls=common_1.values(node.state.views||{});var subPath=PathFactory.subPath(path,function(n){return n===node});var viewConfigs=viewDecls.map(function(view){return $view.createViewConfig(subPath,view)});node.views=viewConfigs.reduce(common_1.unnestR,[])})};PathFactory.inheritParams=function(fromPath,toPath,toKeys){if(toKeys===void 0){toKeys=[]}function nodeParamVals(path,state){var node=common_1.find(path,hof_1.propEq('state',state));return common_1.extend({},node&&node.paramValues)}function makeInheritedParamsNode(toNode){var toParamVals=common_1.extend({},toNode&&toNode.paramValues);var incomingParamVals=common_1.pick(toParamVals,toKeys);toParamVals=common_1.omit(toParamVals,toKeys);var fromParamVals=nodeParamVals(fromPath,toNode.state)||{};var ownParamVals=common_1.extend(toParamVals,fromParamVals,incomingParamVals);return new node_1.PathNode(toNode.state).applyRawParams(ownParamVals)}return toPath.map(makeInheritedParamsNode)};PathFactory.treeChanges=function(fromPath,toPath,reloadState){var keep=0,max=Math.min(fromPath.length,toPath.length);var staticParams=function(state){return state.parameters({inherit:false}).filter(hof_1.not(hof_1.prop('dynamic'))).map(hof_1.prop('id'))};var nodesMatch=function(node1,node2){return node1.equals(node2,staticParams(node1.state))};while(keep<max&&fromPath[keep].state!==reloadState&&nodesMatch(fromPath[keep],toPath[keep])){keep++}function applyToParams(retainedNode,idx){var cloned=node_1.PathNode.clone(retainedNode);cloned.paramValues=toPath[idx].paramValues;return cloned}var from,retained,exiting,entering,to;from=fromPath;retained=from.slice(0,keep);exiting=from.slice(keep);var retainedWithToParams=retained.map(applyToParams);entering=toPath.slice(keep);to=(retainedWithToParams).concat(entering);return{from:from,to:to,retained:retained,exiting:exiting,entering:entering}};PathFactory.subPath=function(path,predicate){var node=common_1.find(path,predicate);var elementIdx=path.indexOf(node);return elementIdx===-1?undefined:path.slice(0,elementIdx+1)};PathFactory.paramValues=function(path){return path.reduce(function(acc,node){return common_1.extend(acc,node.paramValues)},{})};return PathFactory}());exports.PathFactory=PathFactory},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var param_1=__webpack_require__(22);var PathNode=(function(){function PathNode(stateOrPath){if(stateOrPath instanceof PathNode){var node=stateOrPath;this.state=node.state;this.paramSchema=node.paramSchema.slice();this.paramValues=common_1.extend({},node.paramValues);this.resolvables=node.resolvables.slice();this.views=node.views&&node.views.slice()}else{var state=stateOrPath;this.state=state;this.paramSchema=state.parameters({inherit:false});this.paramValues={};this.resolvables=state.resolvables.map(function(res){return res.clone()})}}PathNode.prototype.applyRawParams=function(params){var getParamVal=function(paramDef){return[paramDef.id,paramDef.value(params[paramDef.id])]};this.paramValues=this.paramSchema.reduce(function(memo,pDef){return common_1.applyPairs(memo,getParamVal(pDef))},{});return this};PathNode.prototype.parameter=function(name){return common_1.find(this.paramSchema,hof_1.propEq("id",name))};PathNode.prototype.equals=function(node,keys){var _this=this;if(keys===void 0){keys=this.paramSchema.map(function(p){return p.id})}var paramValsEq=function(key){return _this.parameter(key).type.equals(_this.paramValues[key],node.paramValues[key])};return this.state===node.state&&keys.map(paramValsEq).reduce(common_1.allTrueR,true)};PathNode.clone=function(node){return new PathNode(node)};PathNode.matching=function(pathA,pathB){var matching=[];for(var i=0;i<pathA.length&&i<pathB.length;i++){var a=pathA[i],b=pathB[i];if(a.state!==b.state)break;if(!param_1.Param.equals(a.paramSchema,a.paramValues,b.paramValues))break;matching.push(a)}return matching};return PathNode}());exports.PathNode=PathNode},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(4);var coreservices_1=__webpack_require__(6);var urlMatcherConfig_1=__webpack_require__(23);var type_1=__webpack_require__(24);var hasOwn=Object.prototype.hasOwnProperty;var isShorthand=function(cfg){return["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length===0};(function(DefType){DefType[DefType["PATH"]=0]="PATH";DefType[DefType["SEARCH"]=1]="SEARCH";DefType[DefType["CONFIG"]=2]="CONFIG"})(exports.DefType||(exports.DefType={}));var DefType=exports.DefType;function unwrapShorthand(cfg){cfg=isShorthand(cfg)&&{value:cfg}||cfg;return common_1.extend(cfg,{$$fn:predicates_1.isInjectable(cfg.value)?cfg.value:function(){return cfg.value}})}function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&urlType.name!=='string')throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&urlType.name==='string'&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type)return(location===DefType.CONFIG?paramTypes.type("any"):paramTypes.type("string"));return cfg.type instanceof type_1.ParamType?cfg.type:paramTypes.type(cfg.type)}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===false)return false;if(!predicates_1.isDefined(squash)||squash==null)return urlMatcherConfig_1.matcherConfig.defaultSquashPolicy();if(squash===true||predicates_1.isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string");}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:(isOptional||arrayMode?undefined:"")},{from:null,to:(isOptional||arrayMode?undefined:"")}];replace=predicates_1.isArray(config.replace)?config.replace:[];if(predicates_1.isString(squash))replace.push({from:squash,to:undefined});configuredKeys=common_1.map(replace,hof_1.prop("from"));return common_1.filter(defaultPolicy,function(item){return configuredKeys.indexOf(item.from)===-1}).concat(replace)}var Param=(function(){function Param(id,type,config,location,paramTypes){config=unwrapShorthand(config);type=getType(config,type,location,id,paramTypes);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,location===DefType.SEARCH):type;var isOptional=config.value!==undefined;var dynamic=predicates_1.isDefined(config.dynamic)?!!config.dynamic:!!type.dynamic;var squash=getSquashPolicy(config,isOptional);var replace=getReplace(config,arrayMode,isOptional,squash);function getArrayMode(){var arrayDefaults={array:(location===DefType.SEARCH?"auto":false)};var arrayParamNomenclature=id.match(/\[\]$/)?{array:true}:{};return common_1.extend(arrayDefaults,arrayParamNomenclature,config).array}common_1.extend(this,{id:id,type:type,location:location,squash:squash,replace:replace,isOptional:isOptional,dynamic:dynamic,config:config,array:arrayMode})}Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)};Param.prototype.value=function(value){var _this=this;var $$getDefaultValue=function(){if(!coreservices_1.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=coreservices_1.services.$injector.invoke(_this.config.$$fn);if(defaultValue!==null&&defaultValue!==undefined&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");return defaultValue};var $replace=function(val){var replacement=common_1.map(common_1.filter(_this.replace,hof_1.propEq('from',val)),hof_1.prop("to"));return replacement.length?replacement[0]:val};value=$replace(value);return!predicates_1.isDefined(value)?$$getDefaultValue():this.type.$normalize(value)};Param.prototype.isSearch=function(){return this.location===DefType.SEARCH};Param.prototype.validates=function(value){if((!predicates_1.isDefined(value)||value===null)&&this.isOptional)return true;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return false;var encoded=this.type.encode(normalized);return!(predicates_1.isString(encoded)&&!this.type.pattern.exec(encoded))};Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"};Param.fromConfig=function(id,type,config,paramTypes){return new Param(id,type,config,DefType.CONFIG,paramTypes)};Param.fromPath=function(id,type,config,paramTypes){return new Param(id,type,config,DefType.PATH,paramTypes)};Param.fromSearch=function(id,type,config,paramTypes){return new Param(id,type,config,DefType.SEARCH,paramTypes)};Param.values=function(params,values){if(values===void 0){values={}}return params.map(function(param){return[param.id,param.value(values[param.id])]}).reduce(common_1.applyPairs,{})};Param.changed=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return params.filter(function(param){return!param.type.equals(values1[param.id],values2[param.id])})};Param.equals=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return Param.changed(params,values1,values2).length===0};Param.validates=function(params,values){if(values===void 0){values={}}return params.map(function(param){return param.validates(values[param.id])}).reduce(common_1.allTrueR,true)};return Param}());exports.Param=Param},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var MatcherConfig=(function(){function MatcherConfig(){this._isCaseInsensitive=false;this._isStrictMode=true;this._defaultSquashPolicy=false}MatcherConfig.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=predicates_1.isDefined(value)?value:this._isCaseInsensitive};MatcherConfig.prototype.strictMode=function(value){return this._isStrictMode=predicates_1.isDefined(value)?value:this._isStrictMode};MatcherConfig.prototype.defaultSquashPolicy=function(value){if(predicates_1.isDefined(value)&&value!==true&&value!==false&&!predicates_1.isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=predicates_1.isDefined(value)?value:this._defaultSquashPolicy};return MatcherConfig}());exports.MatcherConfig=MatcherConfig;exports.matcherConfig=new MatcherConfig()},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);function ArrayType(type,mode){var _this=this;function arrayWrap(val){return predicates_1.isArray(val)?val:(predicates_1.isDefined(val)?[val]:[])}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return mode==="auto"?val[0]:val;default:return val}}function arrayHandler(callback,allTruthyMode){return function handleArray(val){if(predicates_1.isArray(val)&&val.length===0)return val;var arr=arrayWrap(val);var result=common_1.map(arr,callback);return(allTruthyMode===true)?common_1.filter(result,function(x){return!x}).length===0:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function handleArray(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return false;for(var i=0;i<left.length;i++){if(!callback(left[i],right[i]))return false}return true}}['encode','decode','equals','$normalize'].forEach(function(name){var paramTypeFn=type[name].bind(type);var wrapperFn=name==='equals'?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)});common_1.extend(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,is:arrayHandler(type.is.bind(type),true),$arrayMode:mode})}var ParamType=(function(){function ParamType(def){this.pattern=/.*/;common_1.extend(this,def)}ParamType.prototype.is=function(val,key){return true};ParamType.prototype.encode=function(val,key){return val};ParamType.prototype.decode=function(val,key){return val};ParamType.prototype.equals=function(a,b){return a==b};ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)};ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"};ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)};ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if(mode==="auto"&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)};return ParamType}());exports.ParamType=ParamType},function(module,exports,__webpack_require__){"use strict";var urlMatcherFactory_1=__webpack_require__(26);var urlRouter_1=__webpack_require__(29);var state_1=__webpack_require__(30);var urlRouter_2=__webpack_require__(29);var transitionService_1=__webpack_require__(31);var view_1=__webpack_require__(38);var stateRegistry_1=__webpack_require__(39);var stateService_1=__webpack_require__(44);var globals_1=__webpack_require__(45);var UIRouter=(function(){function UIRouter(){this.viewService=new view_1.ViewService();this.transitionService=new transitionService_1.TransitionService(this);this.globals=new globals_1.Globals(this.transitionService);this.urlMatcherFactory=new urlMatcherFactory_1.UrlMatcherFactory();this.urlRouterProvider=new urlRouter_1.UrlRouterProvider(this.urlMatcherFactory,this.globals.params);this.urlRouter=new urlRouter_2.UrlRouter(this.urlRouterProvider);this.stateRegistry=new stateRegistry_1.StateRegistry(this.urlMatcherFactory,this.urlRouterProvider);this.stateProvider=new state_1.StateProvider(this.stateRegistry);this.stateService=new stateService_1.StateService(this);this.viewService.rootContext(this.stateRegistry.root());this.globals.$current=this.stateRegistry.root();this.globals.current=this.globals.$current.self}return UIRouter}());exports.UIRouter=UIRouter},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var urlMatcher_1=__webpack_require__(27);var urlMatcherConfig_1=__webpack_require__(23);var param_1=__webpack_require__(22);var paramTypes_1=__webpack_require__(28);function getDefaultConfig(){return{strict:urlMatcherConfig_1.matcherConfig.strictMode(),caseInsensitive:urlMatcherConfig_1.matcherConfig.caseInsensitive()}}var UrlMatcherFactory=(function(){function UrlMatcherFactory(){this.paramTypes=new paramTypes_1.ParamTypes();common_1.extend(this,{UrlMatcher:urlMatcher_1.UrlMatcher,Param:param_1.Param})}UrlMatcherFactory.prototype.caseInsensitive=function(value){return urlMatcherConfig_1.matcherConfig.caseInsensitive(value)};UrlMatcherFactory.prototype.strictMode=function(value){return urlMatcherConfig_1.matcherConfig.strictMode(value)};UrlMatcherFactory.prototype.defaultSquashPolicy=function(value){return urlMatcherConfig_1.matcherConfig.defaultSquashPolicy(value)};UrlMatcherFactory.prototype.compile=function(pattern,config){return new urlMatcher_1.UrlMatcher(pattern,this.paramTypes,common_1.extend(getDefaultConfig(),config))};UrlMatcherFactory.prototype.isMatcher=function(object){if(!predicates_1.isObject(object))return false;var result=true;common_1.forEach(urlMatcher_1.UrlMatcher.prototype,function(val,name){if(predicates_1.isFunction(val))result=result&&(predicates_1.isDefined(object[name])&&predicates_1.isFunction(object[name]))});return result};UrlMatcherFactory.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return!predicates_1.isDefined(definition)?type:this};UrlMatcherFactory.prototype.$get=function(){this.paramTypes.enqueue=false;this.paramTypes._flushTypeQueue();return this};return UrlMatcherFactory}());exports.UrlMatcherFactory=UrlMatcherFactory},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(4);var param_1=__webpack_require__(22);var predicates_2=__webpack_require__(4);var param_2=__webpack_require__(22);var common_2=__webpack_require__(3);var common_3=__webpack_require__(3);function quoteRegExp(string,param){var surroundPattern=['',''],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case false:surroundPattern=['(',')'+(param.isOptional?'?':'')];break;case true:result=result.replace(/\/$/,'');surroundPattern=['(?:\/(',')|\/)?'];break;default:surroundPattern=[("("+param.squash+"|"),')?'];break}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}var memoizeTo=function(obj,prop,fn){return obj[prop]=obj[prop]||fn()};var UrlMatcher=(function(){function UrlMatcher(pattern,paramTypes,config){var _this=this;this.config=config;this._cache={path:[],pattern:null};this._children=[];this._params=[];this._segments=[];this._compiled=[];this.pattern=pattern;this.config=common_1.defaults(this.config,{params:{},strict:true,caseInsensitive:false,paramMap:common_1.identity});var placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,last=0,m,patterns=[];var checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(common_1.find(_this._params,hof_1.propEq('id',id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");};var matchDetails=function(m,isSearch){var id=m[2]||m[3],regexp=isSearch?m[4]:m[4]||(m[1]==='*'?'.*':null);return{id:id,regexp:regexp,cfg:_this.config.params[id],segment:pattern.substring(last,m.index),type:!regexp?null:paramTypes.type(regexp||"string")||common_1.inherit(paramTypes.type("string"),{pattern:new RegExp(regexp,_this.config.caseInsensitive?'i':undefined)})}};var p,segment;while((m=placeholder.exec(pattern))){p=matchDetails(m,false);if(p.segment.indexOf('?')>=0)break;checkParamErrors(p.id);this._params.push(param_1.Param.fromPath(p.id,p.type,this.config.paramMap(p.cfg,false),paramTypes));this._segments.push(p.segment);patterns.push([p.segment,common_1.tail(this._params)]);last=placeholder.lastIndex}segment=pattern.substring(last);var i=segment.indexOf('?');if(i>=0){var search=segment.substring(i);segment=segment.substring(0,i);if(search.length>0){last=0;while((m=searchPlaceholder.exec(search))){p=matchDetails(m,true);checkParamErrors(p.id);this._params.push(param_1.Param.fromSearch(p.id,p.type,this.config.paramMap(p.cfg,true),paramTypes));last=placeholder.lastIndex}}}this._segments.push(segment);common_1.extend(this,{_compiled:patterns.map(function(pattern){return quoteRegExp.apply(null,pattern)}).concat(quoteRegExp(segment)),prefix:this._segments[0]});Object.freeze(this)}UrlMatcher.prototype.append=function(url){this._children.push(url);common_1.forEach(url._cache,function(val,key){return url._cache[key]=predicates_1.isArray(val)?[]:null});url._cache.path=this._cache.path.concat(this);return url};UrlMatcher.prototype.isRoot=function(){return this._cache.path.length===0};UrlMatcher.prototype.toString=function(){return this.pattern};UrlMatcher.prototype.exec=function(path,search,hash,options){var _this=this;if(search===void 0){search={}}if(options===void 0){options={}}var match=memoizeTo(this._cache,'pattern',function(){return new RegExp(['^',common_1.unnest(_this._cache.path.concat(_this).map(hof_1.prop('_compiled'))).join(''),_this.config.strict===false?'\/?':'','$'].join(''),_this.config.caseInsensitive?'i':undefined)}).exec(path);if(!match)return null;var allParams=this.parameters(),pathParams=allParams.filter(function(param){return!param.isSearch()}),searchParams=allParams.filter(function(param){return param.isSearch()}),nPathSegments=this._cache.path.concat(this).map(function(urlm){return urlm._segments.length-1}).reduce(function(a,x){return a+x}),values={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");function decodePathArray(string){var reverseString=function(str){return str.split("").reverse().join("")};var unquoteDashes=function(str){return str.replace(/\\-/g,"-")};var split=reverseString(string).split(/-(?!\\)/);var allReversed=common_1.map(split,reverseString);return common_1.map(allReversed,unquoteDashes).reverse()}for(var i=0;i<nPathSegments;i++){var param=pathParams[i];var value=match[i+1];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(value&&param.array===true)value=decodePathArray(value);if(predicates_2.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)}searchParams.forEach(function(param){var value=search[param.id];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(predicates_2.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)});if(hash)values["#"]=hash;return values};UrlMatcher.prototype.parameters=function(opts){if(opts===void 0){opts={}}if(opts.inherit===false)return this._params;return common_1.unnest(this._cache.path.concat(this).map(hof_1.prop('_params')))};UrlMatcher.prototype.parameter=function(id,opts){if(opts===void 0){opts={}}var parent=common_1.tail(this._cache.path);return(common_1.find(this._params,hof_1.propEq('id',id))||(opts.inherit!==false&&parent&&parent.parameter(id))||null)};UrlMatcher.prototype.validates=function(params){var _this=this;var validParamVal=function(param,val){return!param||param.validates(val)};return common_1.pairs(params||{}).map(function(_a){var key=_a[0],val=_a[1];return validParamVal(_this.parameter(key),val)}).reduce(common_1.allTrueR,true)};UrlMatcher.prototype.format=function(values){if(values===void 0){values={}}if(!this.validates(values))return null;var urlMatchers=this._cache.path.slice().concat(this);var pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(common_2.unnestR,[]);var queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(common_2.unnestR,[]);function getDetails(param){var value=param.value(values[param.id]);var isDefaultValue=param.isDefaultValue(value);var squash=isDefaultValue?param.squash:false;var encoded=param.type.encode(value);return{param:param,value:value,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}var pathString=pathSegmentsAndParams.reduce(function(acc,x){if(predicates_1.isString(x))return acc+x;var _a=getDetails(x),squash=_a.squash,encoded=_a.encoded,param=_a.param;if(squash===true)return(acc.match(/\/$/))?acc.slice(0,-1):acc;if(predicates_1.isString(squash))return acc+squash;if(squash!==false)return acc;if(encoded==null)return acc;if(predicates_1.isArray(encoded))return acc+common_1.map(encoded,UrlMatcher.encodeDashes).join("-");if(param.type.raw)return acc+encoded;return acc+encodeURIComponent(encoded)},"");var queryString=queryParams.map(function(param){var _a=getDetails(param),squash=_a.squash,encoded=_a.encoded,isDefaultValue=_a.isDefaultValue;if(encoded==null||(isDefaultValue&&squash!==false))return;if(!predicates_1.isArray(encoded))encoded=[encoded];if(encoded.length===0)return;if(!param.type.raw)encoded=common_1.map(encoded,encodeURIComponent);return encoded.map(function(val){return(param.id+"="+val)})}).filter(common_1.identity).reduce(common_2.unnestR,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values["#"]?"#"+values["#"]:"")};UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,function(c){return("%5C%"+c.charCodeAt(0).toString(16).toUpperCase())})};UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments;var pathParams=matcher._params.filter(function(p){return p.location===param_2.DefType.PATH});return common_3.arrayTuples(staticSegments,pathParams.concat(undefined)).reduce(common_2.unnestR,[]).filter(function(x){return x!==""&&predicates_2.isDefined(x)})};UrlMatcher.queryParams=function(matcher){return matcher._params.filter(function(p){return p.location===param_2.DefType.SEARCH})};UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;return UrlMatcher}());exports.UrlMatcher=UrlMatcher},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var hof_1=__webpack_require__(5);var coreservices_1=__webpack_require__(6);var type_1=__webpack_require__(24);function valToString(val){return val!=null?val.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):val}function valFromString(val){return val!=null?val.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):val}var ParamTypes=(function(){function ParamTypes(){this.enqueue=true;this.typeQueue=[];this.defaultTypes={"hash":{encode:valToString,decode:valFromString,is:hof_1.is(String),pattern:/.*/,equals:function(a,b){return a==b}},"string":{encode:valToString,decode:valFromString,is:hof_1.is(String),pattern:/[^/]*/},"int":{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return predicates_1.isDefined(val)&&this.decode(val.toString())===val},pattern:/-?\d+/},"bool":{encode:function(val){return val&&1||0},decode:function(val){return parseInt(val,10)!==0},is:hof_1.is(Boolean),pattern:/0|1/},"date":{encode:function(val){return!this.is(val)?undefined:[val.getFullYear(),('0'+(val.getMonth()+1)).slice(-2),('0'+val.getDate()).slice(-2)].join("-")},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(l,r){return['getFullYear','getMonth','getDate'].reduce(function(acc,fn){return acc&&l[fn]()===r[fn]()},true)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},"json":{encode:common_1.toJson,decode:common_1.fromJson,is:hof_1.is(Object),equals:common_1.equals,pattern:/[^/]*/},"any":{encode:common_1.identity,decode:common_1.identity,equals:common_1.equals,pattern:/.*/}};var makeType=function(definition,name){return new type_1.ParamType(common_1.extend({name:name},definition))};this.types=common_1.inherit(common_1.map(this.defaultTypes,makeType),{})}ParamTypes.prototype.type=function(name,definition,definitionFn){if(!predicates_1.isDefined(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");this.types[name]=new type_1.ParamType(common_1.extend({name:name},definition));if(definitionFn){this.typeQueue.push({name:name,def:definitionFn});if(!this.enqueue)this._flushTypeQueue()}return this};ParamTypes.prototype._flushTypeQueue=function(){while(this.typeQueue.length){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");common_1.extend(this.types[type.name],coreservices_1.services.$injector.invoke(type.def))}};return ParamTypes}());exports.ParamTypes=ParamTypes},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var coreservices_1=__webpack_require__(6);var $location=coreservices_1.services.location;function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return(prefix!=null)?prefix[1].replace(/\\(.)/g,"$1"):''}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match[what==='$'?0:Number(what)]})}function handleIfMatch($injector,$stateParams,handler,match){if(!match)return false;var result=$injector.invoke(handler,handler,{$match:match,$stateParams:$stateParams});return predicates_1.isDefined(result)?result:true}function appendBasePath(url,isHtml5,absolute){var baseHref=coreservices_1.services.locationConfig.baseHref();if(baseHref==='/')return url;if(isHtml5)return baseHref.slice(0,-1)+url;if(absolute)return baseHref.slice(1)+url;return url}function update(rules,otherwiseFn,evt){if(evt&&evt.defaultPrevented)return;function check(rule){var handled=rule(coreservices_1.services.$injector,$location);if(!handled)return false;if(predicates_1.isString(handled)){$location.setUrl(handled,true)}return true}var n=rules.length;for(var i=0;i<n;i++){if(check(rules[i]))return}if(otherwiseFn)check(otherwiseFn)}var UrlRouterProvider=(function(){function UrlRouterProvider($urlMatcherFactory,$stateParams){this.rules=[];this.interceptDeferred=false;this.$urlMatcherFactory=$urlMatcherFactory;this.$stateParams=$stateParams}UrlRouterProvider.prototype.rule=function(rule){if(!predicates_1.isFunction(rule))throw new Error("'rule' must be a function");this.rules.push(rule);return this};UrlRouterProvider.prototype.removeRule=function(rule){return this.rules.length!==common_1.removeFrom(this.rules,rule).length};UrlRouterProvider.prototype.otherwise=function(rule){if(!predicates_1.isFunction(rule)&&!predicates_1.isString(rule))throw new Error("'rule' must be a string or function");this.otherwiseFn=predicates_1.isString(rule)?function(){return rule}:rule;return this};UrlRouterProvider.prototype.when=function(what,handler,ruleCallback){if(ruleCallback===void 0){ruleCallback=function(rule){}}var _a=this,$urlMatcherFactory=_a.$urlMatcherFactory,$stateParams=_a.$stateParams;var redirect,handlerIsString=predicates_1.isString(handler);if(predicates_1.isString(what))what=$urlMatcherFactory.compile(what);if(!handlerIsString&&!predicates_1.isFunction(handler)&&!predicates_1.isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(_what,_handler){if(handlerIsString){redirect=$urlMatcherFactory.compile(_handler);_handler=['$match',redirect.format.bind(redirect)]}return common_1.extend(function(){return handleIfMatch(coreservices_1.services.$injector,$stateParams,_handler,_what.exec($location.path(),$location.search(),$location.hash()))},{prefix:predicates_1.isString(_what.prefix)?_what.prefix:''})},regex:function(_what,_handler){if(_what.global||_what.sticky)throw new Error("when() RegExp must not be global or sticky");if(handlerIsString){redirect=_handler;_handler=['$match',function($match){return interpolate(redirect,$match)}]}return common_1.extend(function(){return handleIfMatch(coreservices_1.services.$injector,$stateParams,_handler,_what.exec($location.path()))},{prefix:regExpPrefix(_what)})}};var check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check){if(check[n]){var rule=strategies[n](what,handler);ruleCallback(rule);return this.rule(rule)}}throw new Error("invalid 'what' in when()");};UrlRouterProvider.prototype.deferIntercept=function(defer){if(defer===undefined)defer=true;this.interceptDeferred=defer};return UrlRouterProvider}());exports.UrlRouterProvider=UrlRouterProvider;var UrlRouter=(function(){function UrlRouter(urlRouterProvider){this.urlRouterProvider=urlRouterProvider;common_1.bindFunctions(UrlRouter.prototype,this,this)}UrlRouter.prototype.sync=function(){update(this.urlRouterProvider.rules,this.urlRouterProvider.otherwiseFn)};UrlRouter.prototype.listen=function(){var _this=this;return this.listener=this.listener||$location.onChange(function(evt){return update(_this.urlRouterProvider.rules,_this.urlRouterProvider.otherwiseFn,evt)})};UrlRouter.prototype.update=function(read){if(read){this.location=$location.path();return}if($location.path()===this.location)return;$location.setUrl(this.location,true)};UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;$location.setUrl(urlMatcher.format(params||{}),replace)};UrlRouter.prototype.href=function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var url=urlMatcher.format(params);options=options||{absolute:false};var cfg=coreservices_1.services.locationConfig;var isHtml5=cfg.html5Mode();if(!isHtml5&&url!==null){url="#"+cfg.hashPrefix()+url}url=appendBasePath(url,isHtml5,options.absolute);if(!options.absolute||!url){return url}var slash=(!isHtml5&&url?'/':''),port=cfg.port();port=(port===80||port===443?'':':'+port);return[cfg.protocol(),'://',cfg.host(),port,slash,url].join('')};return UrlRouter}());exports.UrlRouter=UrlRouter},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var common_1=__webpack_require__(3);var StateProvider=(function(){function StateProvider(stateRegistry){this.stateRegistry=stateRegistry;this.invalidCallbacks=[];common_1.bindFunctions(StateProvider.prototype,this,this)}StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this};StateProvider.prototype.state=function(name,definition){if(predicates_1.isObject(name)){definition=name}else{definition.name=name}this.stateRegistry.register(definition);return this};StateProvider.prototype.onInvalid=function(callback){this.invalidCallbacks.push(callback)};return StateProvider}());exports.StateProvider=StateProvider},function(module,exports,__webpack_require__){"use strict";var transition_1=__webpack_require__(11);var hookRegistry_1=__webpack_require__(15);var resolve_1=__webpack_require__(32);var views_1=__webpack_require__(33);var url_1=__webpack_require__(34);var redirectTo_1=__webpack_require__(35);var onEnterExitRetain_1=__webpack_require__(36);var lazyLoadStates_1=__webpack_require__(37);exports.defaultTransOpts={location:true,relative:null,inherit:false,notify:true,reload:false,custom:{},current:function(){return null},source:"unknown"};var TransitionService=(function(){function TransitionService(_router){this._router=_router;this.$view=_router.viewService;hookRegistry_1.HookRegistry.mixin(new hookRegistry_1.HookRegistry(),this);this._deregisterHookFns={};this.registerTransitionHooks()}TransitionService.prototype.registerTransitionHooks=function(){var fns=this._deregisterHookFns;fns.redirectTo=redirectTo_1.registerRedirectToHook(this);fns.onExit=onEnterExitRetain_1.registerOnExitHook(this);fns.onRetain=onEnterExitRetain_1.registerOnRetainHook(this);fns.onEnter=onEnterExitRetain_1.registerOnEnterHook(this);fns.eagerResolve=resolve_1.registerEagerResolvePath(this);fns.lazyResolve=resolve_1.registerLazyResolveState(this);fns.loadViews=views_1.registerLoadEnteringViews(this);fns.activateViews=views_1.registerActivateViews(this);fns.updateUrl=url_1.registerUpdateUrl(this);fns.lazyLoad=lazyLoadStates_1.registerLazyLoadHook(this)};TransitionService.prototype.onBefore=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onStart=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onExit=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onRetain=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onEnter=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onFinish=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onSuccess=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.onError=function(matchCriteria,callback,options){throw"";};TransitionService.prototype.create=function(fromPath,targetState){return new transition_1.Transition(fromPath,targetState,this._router)};return TransitionService}());exports.TransitionService=TransitionService},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var resolveContext_1=__webpack_require__(17);var hof_1=__webpack_require__(5);var eagerResolvePath=function(trans){return new resolveContext_1.ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(common_1.noop)};exports.registerEagerResolvePath=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:1000})};var lazyResolveState=function(trans,state){return new resolveContext_1.ResolveContext(trans.treeChanges().to).subContext(state).resolvePath("LAZY",trans).then(common_1.noop)};exports.registerLazyResolveState=function(transitionService){return transitionService.onEnter({entering:hof_1.val(true)},lazyResolveState,{priority:1000})}},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var coreservices_1=__webpack_require__(6);var loadEnteringViews=function(transition){var enteringViews=transition.views("entering");if(!enteringViews.length)return;return coreservices_1.services.$q.all(enteringViews.map(function(view){return view.load()})).then(common_1.noop)};exports.registerLoadEnteringViews=function(transitionService){return transitionService.onStart({},loadEnteringViews)};var activateViews=function(transition){var enteringViews=transition.views("entering");var exitingViews=transition.views("exiting");if(!enteringViews.length&&!exitingViews.length)return;var $view=transition.router.viewService;exitingViews.forEach(function(vc){return $view.deactivateViewConfig(vc)});enteringViews.forEach(function(vc){return $view.activateViewConfig(vc)});$view.sync()};exports.registerActivateViews=function(transitionService){return transitionService.onSuccess({},activateViews)}},function(module,exports){"use strict";var updateUrl=function(transition){var options=transition.options();var $state=transition.router.stateService;var $urlRouter=transition.router.urlRouter;if(options.source!=='url'&&options.location&&$state.$current.navigable){var urlOptions={replace:options.location==='replace'};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(true)};exports.registerUpdateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})}},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var coreservices_1=__webpack_require__(6);var targetState_1=__webpack_require__(14);var redirectToHook=function(trans){var redirect=trans.to().redirectTo;if(!redirect)return;function handleResult(result){var $state=trans.router.stateService;if(result instanceof targetState_1.TargetState)return result;if(predicates_1.isString(result))return $state.target(result,trans.params(),trans.options());if(result['state']||result['params'])return $state.target(result['state']||trans.to(),result['params']||trans.params(),trans.options())}if(predicates_1.isFunction(redirect)){return coreservices_1.services.$q.when(redirect(trans)).then(handleResult)}return handleResult(redirect)};exports.registerRedirectToHook=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)}},function(module,exports){"use strict";function makeEnterExitRetainHook(hookName){return function(transition,state){var hookFn=state[hookName];return hookFn(transition,state)}}var onExitHook=makeEnterExitRetainHook('onExit');exports.registerOnExitHook=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)};var onRetainHook=makeEnterExitRetainHook('onRetain');exports.registerOnRetainHook=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)};var onEnterHook=makeEnterExitRetainHook('onEnter');exports.registerOnEnterHook=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)}},function(module,exports,__webpack_require__){"use strict";var coreservices_1=__webpack_require__(6);var lazyLoadHook=function(transition){var toState=transition.to();var registry=transition.router.stateRegistry;function retryOriginalTransition(){if(transition.options().source==='url'){var loc=coreservices_1.services.location,path_1=loc.path(),search_1=loc.search(),hash_1=loc.hash();var matchState=function(state){return[state,state.url&&state.url.exec(path_1,search_1,hash_1)]};var matches=registry.get().map(function(s){return s.$$state()}).map(matchState).filter(function(_a){var state=_a[0],params=_a[1];return!!params});if(matches.length){var _a=matches[0],state=_a[0],params=_a[1];return transition.router.stateService.target(state,params,transition.options())}transition.router.urlRouter.sync()}var orig=transition.targetState();return transition.router.stateService.target(orig.identifier(),orig.params(),orig.options())}function updateStateRegistry(result){registry.deregister(transition.$to());if(result&&Array.isArray(result.states)){result.states.forEach(function(state){return registry.register(state)})}}var hook=toState.lazyLoad;var promise=hook['_promise'];if(!promise){promise=hook['_promise']=hook(transition).then(updateStateRegistry);var cleanup=function(){return delete hook['_promise']};promise.catch(cleanup,cleanup)}return promise.then(retryOriginalTransition)};exports.registerLazyLoadHook=function(transitionService){return transitionService.onBefore({to:function(state){return!!state.lazyLoad}},lazyLoadHook)}},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(4);var trace_1=__webpack_require__(12);var ViewService=(function(){function ViewService(){var _this=this;this.uiViews=[];this.viewConfigs=[];this._viewConfigFactories={};this.sync=function(){var uiViewsByFqn=_this.uiViews.map(function(uiv){return[uiv.fqn,uiv]}).reduce(common_1.applyPairs,{});var matches=function(uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return false;var vc=viewConfig.viewDecl;var vcSegments=vc.$uiViewName.split(".");var uivSegments=uiView.fqn.split(".");if(!common_1.equals(vcSegments,uivSegments.slice(0-vcSegments.length)))return false;var negOffset=(1-vcSegments.length)||undefined;var fqnToFirstSegment=uivSegments.slice(0,negOffset).join(".");var uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}};function uiViewDepth(uiView){return uiView.fqn.split(".").length}function viewConfigDepth(config){var context=config.viewDecl.$context,count=0;while(++count&&context.parent)context=context.parent;return count}var depthCompare=hof_1.curry(function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))});var matchingConfigPair=function(uiView){var matchingConfigs=_this.viewConfigs.filter(matches(uiView));if(matchingConfigs.length>1)matchingConfigs.sort(depthCompare(viewConfigDepth,-1));return[uiView,matchingConfigs[0]]};var configureUIView=function(_a){var uiView=_a[0],viewConfig=_a[1];if(_this.uiViews.indexOf(uiView)!==-1)uiView.configUpdated(viewConfig)};_this.uiViews.sort(depthCompare(uiViewDepth,1)).map(matchingConfigPair).forEach(configureUIView)}}ViewService.prototype.rootContext=function(context){return this._rootContext=context||this._rootContext};ViewService.prototype.viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory};ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return predicates_1.isArray(cfgs)?cfgs:[cfgs]};ViewService.prototype.deactivateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("<- Removing",viewConfig);common_1.removeFrom(this.viewConfigs,viewConfig)};ViewService.prototype.activateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("-> Registering",viewConfig);this.viewConfigs.push(viewConfig)};ViewService.prototype.registerUIView=function(uiView){trace_1.trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this.uiViews;var fqnMatches=function(uiv){return uiv.fqn===uiView.fqn};if(uiViews.filter(fqnMatches).length)trace_1.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView);uiViews.push(uiView);this.sync();return function(){var idx=uiViews.indexOf(uiView);if(idx<=0){trace_1.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView);return}trace_1.trace.traceViewServiceUIViewEvent("<- Deregistering",uiView);common_1.removeFrom(uiViews)(uiView)}};ViewService.prototype.available=function(){return this.uiViews.map(hof_1.prop("fqn"))};ViewService.prototype.active=function(){return this.uiViews.filter(hof_1.prop("$config")).map(hof_1.prop("name"))};ViewService.normalizeUIViewTarget=function(context,rawViewName){if(rawViewName===void 0){rawViewName=""}var viewAtContext=rawViewName.split("@");var uiViewName=viewAtContext[0]||"$default";var uiViewContextAnchor=predicates_1.isString(viewAtContext[1])?viewAtContext[1]:"^";var relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);if(relativeViewNameSugar){uiViewContextAnchor=relativeViewNameSugar[1];uiViewName=relativeViewNameSugar[2]}if(uiViewName.charAt(0)==='!'){uiViewName=uiViewName.substr(1);uiViewContextAnchor=""}var relativeMatch=/^(\^(?:\.\^)*)$/;if(relativeMatch.exec(uiViewContextAnchor)){var anchor=uiViewContextAnchor.split(".").reduce((function(anchor,x){return anchor.parent}),context);uiViewContextAnchor=anchor.name}return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}};return ViewService}());exports.ViewService=ViewService},function(module,exports,__webpack_require__){"use strict";var stateMatcher_1=__webpack_require__(40);var stateBuilder_1=__webpack_require__(41);var stateQueueManager_1=__webpack_require__(42);var common_1=__webpack_require__(3);var StateRegistry=(function(){function StateRegistry(urlMatcherFactory,urlRouterProvider){this.urlRouterProvider=urlRouterProvider;this.states={};this.listeners=[];this.matcher=new stateMatcher_1.StateMatcher(this.states);this.builder=new stateBuilder_1.StateBuilder(this.matcher,urlMatcherFactory);this.stateQueue=new stateQueueManager_1.StateQueueManager(this.states,this.builder,urlRouterProvider,this.listeners);var rootStateDef={name:'',url:'^',views:null,params:{'#':{value:null,type:'hash',dynamic:true}},abstract:true};var _root=this._root=this.stateQueue.register(rootStateDef);_root.navigable=null}StateRegistry.prototype.onStatesChanged=function(listener){this.listeners.push(listener);return function deregisterListener(){common_1.removeFrom(this.listeners)(listener)}.bind(this)};StateRegistry.prototype.root=function(){return this._root};StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)};StateRegistry.prototype._deregisterTree=function(state){var _this=this;var all=this.get().map(function(s){return s.$$state()});var getChildren=function(states){var children=all.filter(function(s){return states.indexOf(s.parent)!==-1});return children.length===0?children:children.concat(getChildren(children))};var children=getChildren([state]);var deregistered=[state].concat(children).reverse();deregistered.forEach(function(state){_this.urlRouterProvider.removeRule(state._urlRule);delete _this.states[state.name]});return deregistered};StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());this.listeners.forEach(function(listener){return listener("deregistered",deregisteredStates.map(function(s){return s.self;}));});return deregisteredStates;};StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(arguments.length===0)return Object.keys(this.states).map(function(name){return _this.states[name].self;});var found=this.matcher.find(stateOrName,base);return found&&found.self||null;};StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func);};return StateRegistry;}());exports.StateRegistry=StateRegistry;},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var glob_1=__webpack_require__(7);var common_1=__webpack_require__(3);var StateMatcher=(function(){function StateMatcher(_states){this._states=_states;}StateMatcher.prototype.isRelative=function(stateName){stateName=stateName||"";return stateName.indexOf(".")===0||stateName.indexOf("^")===0;};StateMatcher.prototype.find=function(stateOrName,base){if(!stateOrName&&stateOrName!=="")return undefined;var isStr=predicates_1.isString(stateOrName);var name=isStr?stateOrName:stateOrName.name;if(this.isRelative(name))name=this.resolvePath(name,base);var state=this._states[name];if(state&&(isStr||(!isStr&&(state===stateOrName||state.self===stateOrName)))){return state;}else if(isStr){var matches=common_1.values(this._states).map(function(state){return({state:state,glob:new glob_1.Glob(state.name)});}).filter(function(_a){var state=_a.state,glob=_a.glob;return glob.matches(name);}).map(function(_a){var state=_a.state,glob=_a.glob;return state;});if(matches.length>1){console.log("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map(function(match){return match.name;}));}return matches[0];}return undefined;};StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");var baseState=this.find(base);var splitName=name.split("."),i=0,pathLength=splitName.length,current=baseState;for(;i<pathLength;i++){if(splitName[i]===""&&i===0){current=baseState;continue;}if(splitName[i]==="^"){if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent;continue;}break;}var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName;};return StateMatcher;}());exports.StateMatcher=StateMatcher;},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var strings_1=__webpack_require__(9);var hof_1=__webpack_require__(5);var param_1=__webpack_require__(22);var resolvable_1=__webpack_require__(19);var coreservices_1=__webpack_require__(6);var parseUrl=function(url){if(!predicates_1.isString(url))return false;var root=url.charAt(0)==='^';return{val:root?url.substring(1):url,root:root};};function nameBuilder(state){if(state.lazyLoad)state.name=state.self.name+".**";return state.name;}function selfBuilder(state){state.self.$$state=function(){return state;};return state.self;}function dataBuilder(state){if(state.parent&&state.parent.data){state.data=state.self.data=common_1.inherit(state.parent.data,state.data);}return state.data;}var getUrlBuilder=function($urlMatcherFactoryProvider,root){return function urlBuilder(state){var stateDec=state;if(stateDec&&stateDec.url&&stateDec.lazyLoad){stateDec.url+="{remainder:any}";}var parsed=parseUrl(stateDec.url),parent=state.parent;var url=!parsed?stateDec.url:$urlMatcherFactoryProvider.compile(parsed.val,{params:state.params||{},paramMap:function(paramConfig,isSearch){if(stateDec.reloadOnSearch===false&&isSearch)paramConfig=common_1.extend(paramConfig||{},{dynamic:true});return paramConfig;}});if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+state+"'");return(parsed&&parsed.root)?url:((parent&&parent.navigable)||root()).url.append(url);};};var getNavigableBuilder=function(isRoot){return function navigableBuilder(state){return!isRoot(state)&&state.url?state:(state.parent?state.parent.navigable:null);};};var getParamsBuilder=function(paramTypes){return function paramsBuilder(state){var makeConfigParam=function(config,id){return param_1.Param.fromConfig(id,null,config,paramTypes);};var urlParams=(state.url&&state.url.parameters({inherit:false}))||[];var nonUrlParams=common_1.values(common_1.mapObj(common_1.omit(state.params||{},urlParams.map(hof_1.prop('id'))),makeConfigParam));return urlParams.concat(nonUrlParams).map(function(p){return[p.id,p];}).reduce(common_1.applyPairs,{});};};function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state];}function includesBuilder(state){var includes=state.parent?common_1.extend({},state.parent.includes):{};includes[state.name]=true;return includes;}function resolvablesBuilder(state){var objects2Tuples=function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map(function(token){return({token:token,val:resolveObj[token],deps:undefined,policy:resolvePolicies[token]});});};var annotate=function(fn){return fn['$inject']||coreservices_1.services.$injector.annotate(fn,coreservices_1.services.$injector.strictDi);};var isResolveLiteral=function(obj){return!!(obj.token&&obj.resolveFn);};var isLikeNg2Provider=function(obj){return!!((obj.provide||obj.token)&&(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass));};var isTupleFromObj=function(obj){return!!(obj&&obj.val&&(predicates_1.isString(obj.val)||predicates_1.isArray(obj.val)||predicates_1.isFunction(obj.val)));};var token=function(p){return p.provide||p.token;};var literal2Resolvable=hof_1.pattern([[hof_1.prop('resolveFn'),function(p){return new resolvable_1.Resolvable(token(p),p.resolveFn,p.deps,p.policy);}],[hof_1.prop('useFactory'),function(p){return new resolvable_1.Resolvable(token(p),p.useFactory,(p.deps||p.dependencies),p.policy);}],[hof_1.prop('useClass'),function(p){return new resolvable_1.Resolvable(token(p),function(){return new p.useClass();},[],p.policy);}],[hof_1.prop('useValue'),function(p){return new resolvable_1.Resolvable(token(p),function(){return p.useValue;},[],p.policy,p.useValue);}],[hof_1.prop('useExisting'),function(p){return new resolvable_1.Resolvable(token(p),common_1.identity,[p.useExisting],p.policy);}],]);var tuple2Resolvable=hof_1.pattern([[hof_1.pipe(hof_1.prop("val"),predicates_1.isString),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.identity,[tuple.val],tuple.policy);}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isArray),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.tail(tuple.val),tuple.val.slice(0,-1),tuple.policy);}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isFunction),function(tuple){return new resolvable_1.Resolvable(tuple.token,tuple.val,annotate(tuple.val),tuple.policy);}],]);var item2Resolvable=hof_1.pattern([[hof_1.is(resolvable_1.Resolvable),function(r){return r;}],[isResolveLiteral,literal2Resolvable],[isLikeNg2Provider,literal2Resolvable],[isTupleFromObj,tuple2Resolvable],[hof_1.val(true),function(obj){throw new Error("Invalid resolve value: "+strings_1.stringify(obj));}]]);var decl=state.resolve;var items=predicates_1.isArray(decl)?decl:objects2Tuples(decl,state.resolvePolicy||{});return items.map(item2Resolvable);}exports.resolvablesBuilder=resolvablesBuilder;var StateBuilder=(function(){function StateBuilder(matcher,$urlMatcherFactoryProvider){this.matcher=matcher;var self=this;var root=function(){return matcher.find("");};var isRoot=function(state){return state.name==="";};function parentBuilder(state){if(isRoot(state))return null;return matcher.find(self.parentName(state))||root();}this.builders={name:[nameBuilder],self:[selfBuilder],parent:[parentBuilder],data:[dataBuilder],url:[getUrlBuilder($urlMatcherFactoryProvider,root)],navigable:[getNavigableBuilder(isRoot)],params:[getParamsBuilder($urlMatcherFactoryProvider.paramTypes)],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]};}StateBuilder.prototype.builder=function(name,fn){var builders=this.builders;var array=builders[name]||[];if(predicates_1.isString(name)&&!predicates_1.isDefined(fn))return array.length>1?array:array[0];if(!predicates_1.isString(name)||!predicates_1.isFunction(fn))return;builders[name]=array;builders[name].push(fn);return function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null;};};StateBuilder.prototype.build=function(state){var _a=this,matcher=_a.matcher,builders=_a.builders;var parent=this.parentName(state);if(parent&&!matcher.find(parent))return null;for(var key in builders){if(!builders.hasOwnProperty(key))continue;var chain=builders[key].reduce(function(parentFn,step){return function(_state){return step(_state,parentFn);};},common_1.noop);state[key]=chain(state);}return state;};StateBuilder.prototype.parentName=function(state){var name=state.name||"";if(name.indexOf('.')!==-1)return name.substring(0,name.lastIndexOf('.'));if(!state.parent)return"";return predicates_1.isString(state.parent)?state.parent:state.parent.name;};StateBuilder.prototype.name=function(state){var name=state.name;if(name.indexOf('.')!==-1||!state.parent)return name;var parentName=predicates_1.isString(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name;};return StateBuilder;}());exports.StateBuilder=StateBuilder;},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var stateObject_1=__webpack_require__(43);var StateQueueManager=(function(){function StateQueueManager(states,builder,$urlRouterProvider,listeners){this.states=states;this.builder=builder;this.$urlRouterProvider=$urlRouterProvider;this.listeners=listeners;this.queue=[];}StateQueueManager.prototype.register=function(config){var _a=this,states=_a.states,queue=_a.queue,$state=_a.$state;var state=common_1.inherit(new stateObject_1.State(),common_1.extend({},config,{self:config,resolve:config.resolve||[],toString:function(){return config.name;}}));if(!predicates_1.isString(state.name))throw new Error("State must have a valid name");if(states.hasOwnProperty(state.name)||common_1.pluck(queue,'name').indexOf(state.name)!==-1)throw new Error("State '"+state.name+"' is already defined");queue.push(state);if(this.$state){this.flush($state);}return state;};StateQueueManager.prototype.flush=function($state){var _a=this,queue=_a.queue,states=_a.states,builder=_a.builder;var registered=[],orphans=[],previousQueueLength={};while(queue.length>0){var state=queue.shift();var result=builder.build(state);var orphanIdx=orphans.indexOf(state);if(result){if(states.hasOwnProperty(state.name))throw new Error("State '"+name+"' is already defined");states[state.name]=state;this.attachRoute($state,state);if(orphanIdx>=0)orphans.splice(orphanIdx,1);registered.push(state);continue;}var prev=previousQueueLength[state.name];previousQueueLength[state.name]=queue.length;if(orphanIdx>=0&&prev===queue.length){queue.push(state);return states;}else if(orphanIdx<0){orphans.push(state);}queue.push(state);}if(registered.length){this.listeners.forEach(function(listener){return listener("registered",registered.map(function(s){return s.self;}));});}return states;};StateQueueManager.prototype.autoFlush=function($state){this.$state=$state;this.flush($state);};StateQueueManager.prototype.attachRoute=function($state,state){var $urlRouterProvider=this.$urlRouterProvider;if(state.abstract||!state.url)return;$urlRouterProvider.when(state.url,['$match','$stateParams',function($match,$stateParams){if($state.$current.navigable!==state||!common_1.equalForKeys($match,$stateParams)){$state.transitionTo(state,$match,{inherit:true,source:"url"});}}],function(rule){return state._urlRule=rule;});};return StateQueueManager;}());exports.StateQueueManager=StateQueueManager;},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var State=(function(){function State(config){common_1.extend(this,config);}State.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref;};State.prototype.fqn=function(){if(!this.parent||!(this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name;};State.prototype.root=function(){return this.parent&&this.parent.root()||this;};State.prototype.parameters=function(opts){opts=common_1.defaults(opts,{inherit:true});var inherited=opts.inherit&&this.parent&&this.parent.parameters()||[];return inherited.concat(common_1.values(this.params));};State.prototype.parameter=function(id,opts){if(opts===void 0){opts={};}return(this.url&&this.url.parameter(id,opts)||common_1.find(common_1.values(this.params),hof_1.propEq('id',id))||opts.inherit&&this.parent&&this.parent.parameter(id));};State.prototype.toString=function(){return this.fqn();};return State;}());exports.State=State;},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var queue_1=__webpack_require__(8);var coreservices_1=__webpack_require__(6);var pathFactory_1=__webpack_require__(20);var node_1=__webpack_require__(21);var transitionService_1=__webpack_require__(31);var rejectFactory_1=__webpack_require__(10);var targetState_1=__webpack_require__(14);var param_1=__webpack_require__(22);var glob_1=__webpack_require__(7);var common_2=__webpack_require__(3);var common_3=__webpack_require__(3);var StateService=(function(){function StateService(router){this.router=router;this._defaultErrorHandler=function $defaultErrorHandler($error$){if($error$ instanceof Error&&$error$.stack){console.error($error$);console.error($error$.stack);}else if($error$ instanceof rejectFactory_1.Rejection){console.error($error$.toString());if($error$.detail&&$error$.detail.stack)console.error($error$.detail.stack);}else{console.error($error$);}};var getters=['current','$current','params','transition'];var boundFns=Object.keys(StateService.prototype).filter(function(key){return getters.indexOf(key)===-1;});common_3.bindFunctions(StateService.prototype,this,this,boundFns);}Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition;},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params;},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current;},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current;},enumerable:true,configurable:true});StateService.prototype._handleInvalidTargetState=function(fromPath,$to$){var _this=this;var globals=this.router.globals;var latestThing=function(){return globals.transitionHistory.peekTail();};var latest=latestThing();var $from$=pathFactory_1.PathFactory.makeTargetState(fromPath);var callbackQueue=new queue_1.Queue(this.router.stateProvider.invalidCallbacks.slice());var $q=coreservices_1.services.$q,$injector=coreservices_1.services.$injector;var invokeCallback=function(callback){return $q.when($injector.invoke(callback,null,{$to$:$to$,$from$:$from$}));};var checkForRedirect=function(result){if(!(result instanceof targetState_1.TargetState)){return;}var target=result;target=_this.target(target.identifier(),target.params(),target.options());if(!target.valid())return rejectFactory_1.Rejection.invalid(target.error()).toPromise();if(latestThing()!==latest)return rejectFactory_1.Rejection.superseded().toPromise();return _this.transitionTo(target.identifier(),target.params(),target.options());};function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();if(nextCallback===undefined)return rejectFactory_1.Rejection.invalid($to$.error()).toPromise();return invokeCallback(nextCallback).then(checkForRedirect).then(function(result){return result||invokeNextCallback();});}return invokeNextCallback();};StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:predicates_1.isDefined(reloadState)?reloadState:true,inherit:false,notify:false});};;StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:true};var transOpts=common_1.defaults(options,defautGoOpts,transitionService_1.defaultTransOpts);return this.transitionTo(to,params,transOpts);};;StateService.prototype.target=function(identifier,params,options){if(options===void 0){options={};}if(predicates_1.isObject(options.reload)&&!options.reload.name)throw new Error('Invalid reload state object');var reg=this.router.stateRegistry;options.reloadState=options.reload===true?reg.root():reg.matcher.find(options.reload,options.relative);if(options.reload&&!options.reloadState)throw new Error("No such reload state '"+(predicates_1.isString(options.reload)?options.reload:options.reload.name)+"'");var stateDefinition=reg.matcher.find(identifier,options.relative);return new targetState_1.TargetState(identifier,stateDefinition,params,options);};;StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;if(toParams===void 0){toParams={};}if(options===void 0){options={};}var router=this.router;var globals=router.globals;var transHistory=globals.transitionHistory;options=common_1.defaults(options,transitionService_1.defaultTransOpts);options=common_1.extend(options,{current:transHistory.peekTail.bind(transHistory)});var ref=this.target(to,toParams,options);var latestSuccess=globals.successfulTransitions.peekTail();var rootPath=function(){return[new node_1.PathNode(_this.router.stateRegistry.root())];};var currentPath=latestSuccess?latestSuccess.treeChanges().to:rootPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return common_1.silentRejection(ref.error());var rejectedTransitionHandler=function(transition){return function(error){if(error instanceof rejectFactory_1.Rejection){if(error.type===rejectFactory_1.RejectType.IGNORED){router.urlRouter.update();return coreservices_1.services.$q.when(globals.current);}if(error.type===rejectFactory_1.RejectType.SUPERSEDED&&error.redirected&&error.detail instanceof targetState_1.TargetState){var redirect=transition.redirect(error.detail);return redirect.run().catch(rejectedTransitionHandler(redirect));}if(error.type===rejectFactory_1.RejectType.ABORTED){router.urlRouter.update();}}var errorHandler=_this.defaultErrorHandler();errorHandler(error);return coreservices_1.services.$q.reject(error);};};var transition=this.router.transitionService.create(currentPath,ref);var transitionToPromise=transition.run().catch(rejectedTransitionHandler(transition));common_1.silenceUncaughtInPromise(transitionToPromise);return common_1.extend(transitionToPromise,{transition:transition});};;StateService.prototype.is=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return undefined;if(this.$current!==state)return false;return predicates_1.isDefined(params)&&params!==null?param_1.Param.equals(state.parameters(),this.params,params):true;};;StateService.prototype.includes=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var glob=predicates_1.isString(stateOrName)&&glob_1.Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return false;stateOrName=this.$current.name;}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(!predicates_1.isDefined(state))return undefined;if(!predicates_1.isDefined(include[state.name]))return false;return params?common_2.equalForKeys(param_1.Param.values(state.parameters(),params),this.params,Object.keys(params)):true;};;StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:true,inherit:true,absolute:false,relative:this.$current};options=common_1.defaults(options,defaultHrefOpts);params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return null;if(options.inherit)params=this.params.$inherit(params,this.$current,state);var nav=(state&&options.lossy)?state.navigable:state;if(!nav||nav.url===undefined||nav.url===null){return null;}return this.router.urlRouter.href(nav.url,param_1.Param.values(state.parameters(),params),{absolute:options.absolute});};;StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler;};StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;if(arguments.length===0)return reg.get();return reg.get(stateOrName,base||this.$current);};return StateService;}());exports.StateService=StateService;},function(module,exports,__webpack_require__){"use strict";var stateParams_1=__webpack_require__(46);var queue_1=__webpack_require__(8);var common_1=__webpack_require__(3);var Globals=(function(){function Globals(transitionService){var _this=this;this.params=new stateParams_1.StateParams();this.transitionHistory=new queue_1.Queue([],1);this.successfulTransitions=new queue_1.Queue([],1);var beforeNewTransition=function($transition$){_this.transition=$transition$;_this.transitionHistory.enqueue($transition$);var updateGlobalState=function(){_this.successfulTransitions.enqueue($transition$);_this.$current=$transition$.$to();_this.current=_this.$current.self;common_1.copy($transition$.params(),_this.params);};$transition$.onSuccess({},updateGlobalState,{priority:10000});var clearCurrentTransition=function(){if(_this.transition===$transition$)_this.transition=null;};$transition$.promise.then(clearCurrentTransition,clearCurrentTransition);};transitionService.onBefore({},beforeNewTransition);}return Globals;}());exports.Globals=Globals;},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var StateParams=(function(){function StateParams(params){if(params===void 0){params={};}common_1.extend(this,params);}StateParams.prototype.$inherit=function(newParams,$current,$to){var parents=common_1.ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents){if(!parents[i]||!parents[i].params)continue;parentParams=Object.keys(parents[i].params);if(!parentParams.length)continue;for(var j in parentParams){if(inheritList.indexOf(parentParams[j])>=0)continue;inheritList.push(parentParams[j]);inherited[parentParams[j]]=this[parentParams[j]];}}return common_1.extend({},inherited,newParams);};;return StateParams;}());exports.StateParams=StateParams;},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(22));__export(__webpack_require__(28));__export(__webpack_require__(46));__export(__webpack_require__(24));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(21));__export(__webpack_require__(20));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(18));__export(__webpack_require__(19));__export(__webpack_require__(17));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(30));__export(__webpack_require__(41));__export(__webpack_require__(43));__export(__webpack_require__(40));__export(__webpack_require__(42));__export(__webpack_require__(39));__export(__webpack_require__(44));__export(__webpack_require__(14));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(16));__export(__webpack_require__(15));__export(__webpack_require__(10));__export(__webpack_require__(11));__export(__webpack_require__(13));__export(__webpack_require__(31));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(27));__export(__webpack_require__(23));__export(__webpack_require__(26));__export(__webpack_require__(29));},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(__webpack_require__(38));},function(module,exports,__webpack_require__){"use strict";var router_1=__webpack_require__(25);var coreservices_1=__webpack_require__(6);var common_1=__webpack_require__(3);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(4);var resolveService_1=__webpack_require__(55);var trace_1=__webpack_require__(12);var views_1=__webpack_require__(56);var templateFactory_1=__webpack_require__(57);var onEnterExitRetain_1=__webpack_require__(58);var app=angular.module("ui.router.angular1",[]);angular.module('ui.router.util',['ng','ui.router.init']);angular.module('ui.router.router',['ui.router.util']);angular.module('ui.router.state',['ui.router.router','ui.router.util','ui.router.angular1']);angular.module('ui.router',['ui.router.init','ui.router.state','ui.router.angular1']);angular.module('ui.router.compat',['ui.router']);function annotateController(controllerExpression){var $injector=coreservices_1.services.$injector;var $controller=$injector.get("$controller");var oldInstantiate=$injector.instantiate;try{var deps_1;$injector.instantiate=function fakeInstantiate(constructorFunction){$injector.instantiate=oldInstantiate;deps_1=$injector.annotate(constructorFunction);};$controller(controllerExpression,{$scope:{}});return deps_1;}finally{$injector.instantiate=oldInstantiate;}}exports.annotateController=annotateController;var router=null;$uiRouter.$inject=['$locationProvider'];function $uiRouter($locationProvider){router=new router_1.UIRouter();router.stateRegistry.decorator("views",views_1.ng1ViewsBuilder);router.stateRegistry.decorator("onExit",onEnterExitRetain_1.getStateHookBuilder("onExit"));router.stateRegistry.decorator("onRetain",onEnterExitRetain_1.getStateHookBuilder("onRetain"));router.stateRegistry.decorator("onEnter",onEnterExitRetain_1.getStateHookBuilder("onEnter"));router.viewService.viewConfigFactory('ng1',views_1.ng1ViewConfigFactory);common_1.bindFunctions($locationProvider,coreservices_1.services.locationConfig,$locationProvider,['hashPrefix']);var urlListeners=[];coreservices_1.services.location.onChange=function(callback){urlListeners.push(callback);return function(){return common_1.removeFrom(urlListeners)(callback);};};this.$get=$get;$get.$inject=['$location','$browser','$sniffer','$rootScope','$http','$templateCache'];function $get($location,$browser,$sniffer,$rootScope,$http,$templateCache){$rootScope.$on("$locationChangeSuccess",function(evt){return urlListeners.forEach(function(fn){return fn(evt);});});coreservices_1.services.locationConfig.html5Mode=function(){var html5Mode=$locationProvider.html5Mode();html5Mode=predicates_1.isObject(html5Mode)?html5Mode.enabled:html5Mode;return html5Mode&&$sniffer.history;};coreservices_1.services.location.setUrl=function(newUrl,replace){if(replace===void 0){replace=false;}$location.url(newUrl);if(replace)$location.replace();};coreservices_1.services.template.get=function(url){return $http.get(url,{cache:$templateCache,headers:{Accept:'text/html'}}).then(hof_1.prop("data"));};common_1.bindFunctions($location,coreservices_1.services.location,$location,["replace","url","path","search","hash"]);common_1.bindFunctions($location,coreservices_1.services.locationConfig,$location,['port','protocol','host']);common_1.bindFunctions($browser,coreservices_1.services.locationConfig,$browser,['baseHref']);return router;}}angular.module('ui.router.init',[]).provider("$uiRouter",$uiRouter);runBlock.$inject=['$injector','$q'];function runBlock($injector,$q){coreservices_1.services.$injector=$injector;coreservices_1.services.$q=$q;}angular.module('ui.router.init').run(runBlock);angular.module('ui.router.init').run(['$uiRouter',function($uiRouter){}]);angular.module('ui.router.util').provider('$urlMatcherFactory',['$uiRouterProvider',function(){return router.urlMatcherFactory;}]);angular.module('ui.router.util').run(['$urlMatcherFactory',function($urlMatcherFactory){}]);function getUrlRouterProvider(){router.urlRouterProvider["$get"]=function(){router.urlRouter.update(true);if(!this.interceptDeferred)router.urlRouter.listen();return router.urlRouter;};return router.urlRouterProvider;}angular.module('ui.router.router').provider('$urlRouter',['$uiRouterProvider',getUrlRouterProvider]);angular.module('ui.router.router').run(['$urlRouter',function($urlRouter){}]);function getStateProvider(){router.stateProvider["$get"]=function(){router.stateRegistry.stateQueue.autoFlush(router.stateService);return router.stateService;};return router.stateProvider;}angular.module('ui.router.state').provider('$state',['$uiRouterProvider',getStateProvider]);angular.module('ui.router.state').run(['$state',function($state){}]);angular.module('ui.router.state').factory('$stateParams',['$uiRouter',function($uiRouter){return $uiRouter.globals.params;}]);function getTransitionsProvider(){router.transitionService["$get"]=function(){return router.transitionService;};return router.transitionService;}angular.module('ui.router.state').provider('$transitions',['$uiRouterProvider',getTransitionsProvider]);angular.module('ui.router.util').factory('$templateFactory',['$uiRouter',function(){return new templateFactory_1.TemplateFactory();}]);angular.module('ui.router').factory('$view',function(){return router.viewService;});angular.module('ui.router').factory('$resolve',resolveService_1.resolveFactory);angular.module("ui.router").service("$trace",function(){return trace_1.trace;});watchDigests.$inject=['$rootScope'];function watchDigests($rootScope){$rootScope.$watch(function(){trace_1.trace.approximateDigests++;});}exports.watchDigests=watchDigests;angular.module("ui.router").run(watchDigests);exports.getLocals=function(ctx){var tokens=ctx.getTokens().filter(predicates_1.isString);var tuples=tokens.map(function(key){return[key,ctx.getResolvable(key).data];});return tuples.reduce(common_1.applyPairs,{});};var $stateParams;var $transitions;var $transitionsProvider;var $state;var $stateProvider;var $urlRouterProvider;var $urlRouter;var $urlMatcherFactory;var $urlMatcherFactoryProvider;},function(module,exports,__webpack_require__){"use strict";var stateObject_1=__webpack_require__(43);var node_1=__webpack_require__(21);var resolveContext_1=__webpack_require__(17);var common_1=__webpack_require__(3);var stateBuilder_1=__webpack_require__(41);var $resolve={resolve:function(invocables,locals,parent){if(locals===void 0){locals={};}var parentNode=new node_1.PathNode(new stateObject_1.State({params:{},resolvables:[]}));var node=new node_1.PathNode(new stateObject_1.State({params:{},resolvables:[]}));var context=new resolveContext_1.ResolveContext([parentNode,node]);context.addResolvables(stateBuilder_1.resolvablesBuilder({resolve:invocables}),node.state);var resolveData=function(parentLocals){var rewrap=function(_locals){return stateBuilder_1.resolvablesBuilder({resolve:common_1.mapObj(_locals,function(local){return function(){return local;};})});};context.addResolvables(rewrap(parentLocals),parentNode.state);context.addResolvables(rewrap(locals),node.state);var tuples2ObjR=function(acc,tuple){acc[tuple.token]=tuple.value;return acc;};return context.resolvePath().then(function(results){return results.reduce(tuples2ObjR,{});});};return parent?parent.then(resolveData):resolveData({});}};exports.resolveFactory=function(){return $resolve;};},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var strings_1=__webpack_require__(9);var view_1=__webpack_require__(38);var predicates_1=__webpack_require__(4);var coreservices_1=__webpack_require__(6);var trace_1=__webpack_require__(12);var templateFactory_1=__webpack_require__(57);var resolveContext_1=__webpack_require__(17);var resolvable_1=__webpack_require__(19);exports.ng1ViewConfigFactory=function(path,view){return[new Ng1ViewConfig(path,view)];};function ng1ViewsBuilder(state){var tplKeys=['templateProvider','templateUrl','template','notify','async'],ctrlKeys=['controller','controllerProvider','controllerAs','resolveAs'],compKeys=['component','bindings'],nonCompKeys=tplKeys.concat(ctrlKeys),allKeys=compKeys.concat(nonCompKeys);var views={},viewsObject=state.views||{"$default":common_1.pick(state,allKeys)};common_1.forEach(viewsObject,function(config,name){name=name||"$default";if(predicates_1.isString(config))config={component:config};if(!Object.keys(config).length)return;if(config.component){if(nonCompKeys.map(function(key){return predicates_1.isDefined(config[key]);}).reduce(common_1.anyTrueR,false)){throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: 'name@"+state.name+"'");}config.templateProvider=['$injector',function($injector){var resolveFor=function(key){return config.bindings&&config.bindings[key]||key;};var prefix=angular.version.minor>=3?"::":"";var attributeTpl=function(input){var attrName=strings_1.kebobString(input.name);var resolveName=resolveFor(input.name);if(input.type==='@')return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";return attrName+"='"+prefix+"$resolve."+resolveName+"'";};var attrs=getComponentInputs($injector,config.component).map(attributeTpl).join(" ");var kebobName=strings_1.kebobString(config.component);return"<"+kebobName+" "+attrs+"></"+kebobName+">";}];}config.resolveAs=config.resolveAs||'$resolve';config.$type="ng1";config.$context=state;config.$name=name;var normalized=view_1.ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName;config.$uiViewContextAnchor=normalized.uiViewContextAnchor;views[name]=config;});return views;}exports.ng1ViewsBuilder=ng1ViewsBuilder;var scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map(function(key){return[key,/^([=<@])[?]?(.*)/.exec(bindingsObj[key])];}).filter(function(tuple){return predicates_1.isDefined(tuple)&&predicates_1.isDefined(tuple[1]);}).map(function(tuple){return({name:tuple[1][2]||tuple[0],type:tuple[1][1]});});};var getBindings=function(def){if(predicates_1.isObject(def.bindToController))return scopeBindings(def.bindToController);return scopeBindings(def.scope);};function getComponentInputs($injector,name){var cmpDefs=$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(common_1.unnestR,[]);}var id=0;var Ng1ViewConfig=(function(){function Ng1ViewConfig(path,viewDecl){this.path=path;this.viewDecl=viewDecl;this.$id=id++;this.loaded=false;}Ng1ViewConfig.prototype.load=function(){var _this=this;var $q=coreservices_1.services.$q;if(!this.hasTemplate())throw new Error("No template configuration specified for '"+this.viewDecl.$uiViewName+"@"+this.viewDecl.$uiViewContextAnchor+"'");var context=new resolveContext_1.ResolveContext(this.path);var params=this.path.reduce(function(acc,node){return common_1.extend(acc,node.paramValues);},{});var promises={template:$q.when(this.getTemplate(params,new templateFactory_1.TemplateFactory(),context)),controller:$q.when(this.getController(context))};return $q.all(promises).then(function(results){trace_1.trace.traceViewServiceEvent("Loaded",_this);_this.controller=results.controller;_this.template=results.template;return _this;});};Ng1ViewConfig.prototype.hasTemplate=function(){return!!(this.viewDecl.template||this.viewDecl.templateUrl||this.viewDecl.templateProvider);};Ng1ViewConfig.prototype.getTemplate=function(params,$factory,context){return $factory.fromConfig(this.viewDecl,params,context);};Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!predicates_1.isInjectable(provider))return this.viewDecl.controller;var deps=coreservices_1.services.$injector.annotate(provider);var providerFn=predicates_1.isArray(provider)?common_1.tail(provider):provider;var resolvable=new resolvable_1.Resolvable("",providerFn,deps);return resolvable.get(context);};return Ng1ViewConfig;}());exports.Ng1ViewConfig=Ng1ViewConfig;},function(module,exports,__webpack_require__){"use strict";var predicates_1=__webpack_require__(4);var coreservices_1=__webpack_require__(6);var common_1=__webpack_require__(3);var resolvable_1=__webpack_require__(19);var TemplateFactory=(function(){function TemplateFactory(){}TemplateFactory.prototype.fromConfig=function(config,params,context){return(predicates_1.isDefined(config.template)?this.fromString(config.template,params):predicates_1.isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):predicates_1.isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,context):null);};;TemplateFactory.prototype.fromString=function(template,params){return predicates_1.isFunction(template)?template(params):template;};;TemplateFactory.prototype.fromUrl=function(url,params){if(predicates_1.isFunction(url))url=url(params);if(url==null)return null;return coreservices_1.services.template.get(url);};;TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=coreservices_1.services.$injector.annotate(provider);var providerFn=predicates_1.isArray(provider)?common_1.tail(provider):provider;var resolvable=new resolvable_1.Resolvable("",providerFn,deps);return resolvable.get(context);};;return TemplateFactory;}());exports.TemplateFactory=TemplateFactory;},function(module,exports,__webpack_require__){"use strict";var coreservices_1=__webpack_require__(6);var services_1=__webpack_require__(54);var resolveContext_1=__webpack_require__(17);var common_1=__webpack_require__(3);exports.getStateHookBuilder=function(hookName){return function stateHookBuilder(state,parentFn){var hook=state[hookName];function decoratedNg1Hook(trans,state){var resolveContext=new resolveContext_1.ResolveContext(trans.treeChanges().to);return coreservices_1.services.$injector.invoke(hook,this,common_1.extend({$state$:state},services_1.getLocals(resolveContext)));}return hook?decoratedNg1Hook:undefined;};};},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var hof_1=__webpack_require__(5);function parseStateRef(ref,current){var preparsed=ref.match(/^\s*({[^}]*})\s*$/),parsed;if(preparsed)ref=current+'('+preparsed[1]+')';parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||parsed.length!==4)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null};}function stateContext(el){var $uiView=el.parent().inheritedData('$uiView');var path=hof_1.parse('$cfg.path')($uiView);return path?common_1.tail(path).state.name:undefined;}function getTypeInfo(el){var isSvg=Object.prototype.toString.call(el.prop('href'))==='[object SVGAnimatedString]';var isForm=el[0].nodeName==="FORM";return{attr:isForm?"action":(isSvg?'xlink:href':'href'),isAnchor:el.prop("tagName").toUpperCase()==="A",clickable:!isForm};}function clickHook(el,$state,$timeout,type,current){return function(e){var button=e.which||e.button,target=current();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr('target'))){var transition=$timeout(function(){$state.go(target.state,target.params,target.options);});e.preventDefault();e.stopPropagation();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){if(ignorePreventDefaultCount--<=0)$timeout.cancel(transition);};}};}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:true,source:"sref"};}var uiSref=['$state','$timeout',function $StateRefDirective($state,$timeout){return{restrict:'A',require:['?^uiSrefActive','?^uiSrefActiveEq'],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name);var def={state:ref.state,href:null,params:null,options:null};var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var unlinkInfoFn=null;var hookFn;def.options=common_1.extend(defaultOpts(element,$state),attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{});var update=function(val){if(val)def.params=angular.copy(val);def.href=$state.href(ref.state,def.params,def.options);if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(ref.state,def.params);if(def.href!==null)attrs.$set(type.attr,def.href);};if(ref.paramExpr){scope.$watch(ref.paramExpr,function(val){if(val!==def.params)update(val);},true);def.params=angular.copy(scope.$eval(ref.paramExpr));}update();if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,function(){return def;});element.bind("click",hookFn);scope.$on('$destroy',function(){element.unbind("click",hookFn);});}};}];var uiState=['$state','$timeout',function $StateRefDynamicDirective($state,$timeout){return{restrict:'A',require:['?^uiSrefActive','?^uiSrefActiveEq'],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var group=[attrs.uiState,attrs.uiStateParams||null,attrs.uiStateOpts||null];var watch='['+group.map(function(val){return val||'null';}).join(', ')+']';var def={state:null,params:null,options:null,href:null};var unlinkInfoFn=null;var hookFn;function runStateRefLink(group){def.state=group[0];def.params=group[1];def.options=group[2];def.href=$state.href(def.state,def.params,def.options);if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(def.state,def.params);if(def.href)attrs.$set(type.attr,def.href);}scope.$watch(watch,runStateRefLink,true);runStateRefLink(scope.$eval(watch));if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,function(){return def;});element.bind("click",hookFn);scope.$on('$destroy',function(){element.unbind("click",hookFn);});}};}];var uiSrefActive=['$state','$stateParams','$interpolate','$transitions','$uiRouter',function $StateRefActiveDirective($state,$stateParams,$interpolate,$transitions,$uiRouter){return{restrict:"A",controller:['$scope','$element','$attrs','$timeout',function($scope,$element,$attrs,$timeout){var states=[],activeClasses={},activeEqClass,uiSrefActive;activeEqClass=$interpolate($attrs.uiSrefActiveEq||'',false)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive);}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||'',false)($scope);if(predicates_1.isObject(uiSrefActive)){common_1.forEach(uiSrefActive,function(stateOrName,activeClass){if(predicates_1.isString(stateOrName)){var ref=parseStateRef(stateOrName,$state.current.name);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass);}});}this.$$addStateInfo=function(newState,newParams){if(predicates_1.isObject(uiSrefActive)&&states.length>0){return;}var deregister=addState(newState,newParams,uiSrefActive);update();return deregister;};function updateAfterTransition(trans){trans.promise.then(update);}$scope.$on('$stateChangeSuccess',update);$scope.$on('$destroy',$transitions.onStart({},updateAfterTransition));if($uiRouter.globals.transition){updateAfterTransition($uiRouter.globals.transition);}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element));var stateHash=createStateHash(stateName,stateParams);var stateInfo={state:state||{name:stateName},params:stateParams,hash:stateHash};states.push(stateInfo);activeClasses[stateHash]=activeClass;return function removeState(){var idx=states.indexOf(stateInfo);if(idx!==-1)states.splice(idx,1);};}function createStateHash(state,params){if(!predicates_1.isString(state)){throw new Error('state should be a string');}if(predicates_1.isObject(params)){return state+common_1.toJson(params);}params=$scope.$eval(params);if(predicates_1.isObject(params)){return state+common_1.toJson(params);}return state;}function update(){for(var i=0;i<states.length;i++){if(anyMatch(states[i].state,states[i].params)){addClass($element,activeClasses[states[i].hash]);}else{removeClass($element,activeClasses[states[i].hash]);}if(exactMatch(states[i].state,states[i].params)){addClass($element,activeEqClass);}else{removeClass($element,activeEqClass);}}}function addClass(el,className){$timeout(function(){el.addClass(className);});}function removeClass(el,className){el.removeClass(className);}function anyMatch(state,params){return $state.includes(state.name,params);}function exactMatch(state,params){return $state.is(state.name,params);}update();}]};}];angular.module('ui.router.state').directive('uiSref',uiSref).directive('uiSrefActive',uiSrefActive).directive('uiSrefActiveEq',uiSrefActive).directive('uiState',uiState);},function(module,exports){"use strict";$IsStateFilter.$inject=['$state'];function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options);};isFilter.$stateful=true;return isFilter;}exports.$IsStateFilter=$IsStateFilter;$IncludedByStateFilter.$inject=['$state'];function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options);};includesFilter.$stateful=true;return includesFilter;}exports.$IncludedByStateFilter=$IncludedByStateFilter;angular.module('ui.router.state').filter('isState',$IsStateFilter).filter('includedByState',$IncludedByStateFilter);},function(module,exports,__webpack_require__){"use strict";var common_1=__webpack_require__(3);var predicates_1=__webpack_require__(4);var trace_1=__webpack_require__(12);var views_1=__webpack_require__(56);var hof_1=__webpack_require__(5);var resolveContext_1=__webpack_require__(17);var strings_1=__webpack_require__(9);var services_1=__webpack_require__(54);var uiView=['$view','$animate','$uiViewScroll','$interpolate','$q',function $ViewDirective($view,$animate,$uiViewScroll,$interpolate,$q){function getRenderer(attrs,scope){return{enter:function(element,target,cb){if(angular.version.minor>2){$animate.enter(element,null,target).then(cb);}else{$animate.enter(element,null,target,cb);}},leave:function(element,cb){if(angular.version.minor>2){$animate.leave(element).then(cb);}else{$animate.leave(element,cb);}}};}function configsEqual(config1,config2){return config1===config2;}var rootData={$cfg:{viewDecl:{$context:$view.rootContext()}},$uiView:{}};var directive={count:0,restrict:'ECA',terminal:true,priority:400,transclude:'element',compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,unregister,onloadExp=attrs['onload']||'',autoScrollExp=attrs['autoscroll'],renderer=getRenderer(attrs,scope),viewConfig=undefined,inherited=$element.inheritedData('$uiView')||rootData,name=$interpolate(attrs['uiView']||attrs['name']||'')(scope)||'$default';var activeUIView={$type:'ng1',id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:configUpdatedCallback,get creationContext(){return hof_1.parse('$cfg.viewDecl.$context')(inherited);}};trace_1.trace.traceUIViewEvent("Linking",activeUIView);function configUpdatedCallback(config){if(config&&!(config instanceof views_1.Ng1ViewConfig))return;if(configsEqual(viewConfig,config))return;trace_1.trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context);viewConfig=config;updateView(config);}$element.data('$uiView',{$uiView:activeUIView});updateView();unregister=$view.registerUIView(activeUIView);scope.$on("$destroy",function(){trace_1.trace.traceUIViewEvent("Destroying/Unregistering",activeUIView);unregister();});function cleanupLastView(){if(previousEl){trace_1.trace.traceUIViewEvent("Removing (previous) el",previousEl.data('$uiView'));previousEl.remove();previousEl=null;}if(currentScope){trace_1.trace.traceUIViewEvent("Destroying scope",activeUIView);currentScope.$destroy();currentScope=null;}if(currentEl){var _viewData_1=currentEl.data('$uiViewAnim');trace_1.trace.traceUIViewEvent("Animate out",_viewData_1);renderer.leave(currentEl,function(){_viewData_1.$$animLeave.resolve();previousEl=null;});previousEl=currentEl;currentEl=null;}}function updateView(config){var newScope=scope.$new();var animEnter=$q.defer(),animLeave=$q.defer();var $uiViewData={$cfg:config,$uiView:activeUIView,};var $uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};var cloned=$transclude(newScope,function(clone){clone.data('$uiViewAnim',$uiViewAnim);clone.data('$uiView',$uiViewData);renderer.enter(clone,$element,function onUIViewEnter(){animEnter.resolve();if(currentScope)currentScope.$emit('$viewContentAnimationEnded');if(predicates_1.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp)){$uiViewScroll(clone);}});cleanupLastView();});currentEl=cloned;currentScope=newScope;currentScope.$emit('$viewContentLoaded',config||viewConfig);currentScope.$eval(onloadExp);}};}};return directive;}];$ViewDirectiveFill.$inject=['$compile','$controller','$transitions','$view','$timeout'];function $ViewDirectiveFill($compile,$controller,$transitions,$view,$timeout){var getControllerAs=hof_1.parse('viewDecl.controllerAs');var getResolveAs=hof_1.parse('viewDecl.resolveAs');return{restrict:'ECA',priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element){var data=$element.data('$uiView');if(!data)return;var cfg=data.$cfg||{viewDecl:{}};$element.html(cfg.template||initial);trace_1.trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents());var controller=cfg.controller;var controllerAs=getControllerAs(cfg);var resolveAs=getResolveAs(cfg);var resolveCtx=cfg.path&&new resolveContext_1.ResolveContext(cfg.path);var locals=resolveCtx&&services_1.getLocals(resolveCtx);scope[resolveAs]=locals;if(controller){var controllerInstance=$controller(controller,common_1.extend({},locals,{$scope:scope,$element:$element}));if(controllerAs){scope[controllerAs]=controllerInstance;scope[controllerAs][resolveAs]=locals;}$element.data('$ngControllerController',controllerInstance);$element.children().data('$ngControllerController',controllerInstance);registerControllerCallbacks($transitions,controllerInstance,scope,cfg);}if(predicates_1.isString(cfg.viewDecl.component)){var cmp_1=cfg.viewDecl.component;var kebobName_1=strings_1.kebobString(cmp_1);var getComponentController=function(){var directiveEl=[].slice.call($element[0].children).filter(function(el){return el&&el.tagName&&el.tagName.toLowerCase()===kebobName_1;});return directiveEl&&angular.element(directiveEl).data("$"+cmp_1+"Controller");};var deregisterWatch_1=scope.$watch(getComponentController,function(ctrlInstance){if(!ctrlInstance)return;registerControllerCallbacks($transitions,ctrlInstance,scope,cfg);deregisterWatch_1();});}link(scope);};}};}var hasComponentImpl=typeof angular.module('ui.router')['component']==='function';function registerControllerCallbacks($transitions,controllerInstance,$scope,cfg){if(predicates_1.isFunction(controllerInstance.$onInit)&&!(cfg.viewDecl.component&&hasComponentImpl))controllerInstance.$onInit();var viewState=common_1.tail(cfg.path).state.self;var hookOptions={bind:controllerInstance};if(predicates_1.isFunction(controllerInstance.uiOnParamsChanged)){var resolveContext=new resolveContext_1.ResolveContext(cfg.path);var viewCreationTrans_1=resolveContext.getResolvable('$transition$').data;var paramsUpdated=function($transition$){if($transition$===viewCreationTrans_1||$transition$.exiting().indexOf(viewState)!==-1)return;var toParams=$transition$.params("to");var fromParams=$transition$.params("from");var toSchema=$transition$.treeChanges().to.map(function(node){return node.paramSchema;}).reduce(common_1.unnestR,[]);var fromSchema=$transition$.treeChanges().from.map(function(node){return node.paramSchema;}).reduce(common_1.unnestR,[]);var changedToParams=toSchema.filter(function(param){var idx=fromSchema.indexOf(param);return idx===-1||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id]);});if(changedToParams.length){var changedKeys_1=changedToParams.map(function(x){return x.id;});controllerInstance.uiOnParamsChanged(common_1.filter(toParams,function(val,key){return changedKeys_1.indexOf(key)!==-1;}),$transition$);}};$scope.$on('$destroy',$transitions.onSuccess({},paramsUpdated,hookOptions));}if(predicates_1.isFunction(controllerInstance.uiCanExit)){var criteria={exiting:viewState.name};$scope.$on('$destroy',$transitions.onBefore(criteria,controllerInstance.uiCanExit,hookOptions));}}angular.module('ui.router.state').directive('uiView',uiView);angular.module('ui.router.state').directive('uiView',$ViewDirectiveFill);},function(module,exports){"use strict";function $ViewScrollProvider(){var useAnchorScroll=false;this.useAnchorScroll=function(){useAnchorScroll=true};this.$get=['$anchorScroll','$timeout',function($anchorScroll,$timeout){if(useAnchorScroll){return $anchorScroll}return function($element){return $timeout(function(){$element[0].scrollIntoView()},0,false)}}]}angular.module('ui.router.state').provider('$uiViewScroll',$ViewScrollProvider)}])});